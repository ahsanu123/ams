import{h as Ge,E as qe,g as se,j as _e,S as g,e as We}from"./stack-CD8du1Wu.js";import{a as i,n as e}from"./chunk-K6CSEXPM-Bn6mf80d.js";import{ag as Y,ah as h,ai as x,al as ne,ak as ae,am as oe,an as ie,ab as ce,aG as Ye,aq as Je,aa as b,af as Qe,ae as Xe}from"./Toaster-D9QYH5nK.js";import{d as de}from"./DataListUtil-DLK3g0eA.js";import{z as Ze,a as C,C as er,B as H,D as rr}from"./index-NHkl8kqz.js";import{u as ee,K as z,D as tr,a as sr,b as nr,c as ar,d as or,e as ir,f as cr,g as dr,h as lr,j as ur,i as hr}from"./UserManagementPage-DjA-cFt7.js";import"./query-client-B-np7aBl.js";import{a as J,b as O}from"./user-management-api-CbimgFC6.js";import{S as T,D as le,T as ue,a as he,b as $,c as R,d as pe,e as D,B as re}from"./Scroller-vb5K4257.js";import{H as f,T as k}from"./index-BGCzkhMS.js";import{F as j,a as xe,i as me,f as _}from"./format-date-id-D-ORLjoU.js";import{u as A,C as B,a as W,b as L,f as w}from"./format-as-rupiah-C_Lq9mCl.js";import{A as Q,a as X}from"./avatar-CMyZ4H7r.js";import{G as pr,a as xr}from"./index-BLpYadyO.js";import{u as je,c as mr}from"./customer-money-api-DmVklbqs.js";import{I as jr,C as gr}from"./close-button-UJZd7FY4.js";import{c as E}from"./create-split-props-u5h9OPvL.js";import{c as br,m as Cr,d as fr,e as yr}from"./index-B7FAl-mw.js";import{d as te,T as kr,a as Pr,b as U,c as M}from"./dreg-price-api-CE6ObdYP.js";import"./index-BmMpWGiz.js";import"./QueryClientProvider-DhxQ09mG.js";import"./Scroller-BcfPVuNP.js";import"./index-DlDWRYrk.js";import"./render-strategy-DveMVg2c.js";import"./index-GjkUTHr-.js";const[ge,S]=Y({name:"CheckboxContext",hookName:"useCheckboxContext",providerName:"<CheckboxProvider />"}),be=i.forwardRef((r,t)=>{const s=S(),n=h(s.getControlProps(),r);return e.jsx(x.div,{...n,ref:t})});be.displayName="CheckboxControl";const[lt,vr]=Y({name:"CheckboxGroupContext",hookName:"useCheckboxGroupContext",providerName:"<CheckboxGroupProvider />",strict:!1}),Ce=i.forwardRef((r,t)=>{const s=S(),n=h(s.getHiddenInputProps(),r),o=A();return e.jsx(x.input,{"aria-describedby":o==null?void 0:o.ariaDescribedby,...n,ref:t})});Ce.displayName="CheckboxHiddenInput";const fe=i.forwardRef((r,t)=>{const s=S(),n=h(s.getLabelProps(),r);return e.jsx(x.span,{...n,ref:t})});fe.displayName="CheckboxLabel";const Ir=(r={})=>{const t=vr(),s=A(),n=i.useMemo(()=>h(r,(t==null?void 0:t.getItemProps({value:r.value}))??{}),[r,t]),o=i.useId(),{getRootNode:a}=ne(),{dir:m}=ae(),u={id:o,ids:{label:s==null?void 0:s.ids.label,hiddenInput:s==null?void 0:s.ids.control},dir:m,disabled:s==null?void 0:s.disabled,readOnly:s==null?void 0:s.readOnly,invalid:s==null?void 0:s.invalid,required:s==null?void 0:s.required,getRootNode:a,...n},c=oe(Cr,u);return br(c,ie)},ye=i.forwardRef((r,t)=>{const[s,n]=E()(r,["checked","defaultChecked","disabled","form","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]),o=Ir(s),a=h(o.getRootProps(),n);return e.jsx(ge,{value:o,children:e.jsx(x.label,{...a,ref:t})})});ye.displayName="CheckboxRoot";const ke=i.forwardRef((r,t)=>{const[{value:s},n]=E()(r,["value"]),o=h(s.getRootProps(),n);return e.jsx(ge,{value:s,children:e.jsx(x.label,{...o,ref:t})})});ke.displayName="CheckboxRootProvider";const Pe=i.forwardRef((r,t)=>{const s=A(),n=h(s==null?void 0:s.getInputProps(),r);return e.jsx(x.input,{...n,ref:t})});Pe.displayName="FieldInput";const[ve,P]=Y({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),Ie=i.forwardRef((r,t)=>{const s=P(),n=h(s.getControlProps(),r);return e.jsx(x.div,{...n,ref:t})});Ie.displayName="NumberInputControl";const Ne=i.forwardRef((r,t)=>{const s=P(),n=h(s.getDecrementTriggerProps(),r);return e.jsx(x.button,{...n,ref:t})});Ne.displayName="NumberInputDecrementTrigger";const we=i.forwardRef((r,t)=>{const s=P(),n=h(s.getIncrementTriggerProps(),r);return e.jsx(x.button,{...n,ref:t})});we.displayName="NumberInputIncrementTrigger";const Re=i.forwardRef((r,t)=>{const s=P(),n=h(s.getInputProps(),r),o=A();return e.jsx(x.input,{"aria-describedby":o==null?void 0:o.ariaDescribedby,...n,ref:t})});Re.displayName="NumberInputInput";const De=i.forwardRef((r,t)=>{const s=P(),n=h(s.getLabelProps(),r);return e.jsx(x.label,{...n,ref:t})});De.displayName="NumberInputLabel";const Nr=r=>{const t=i.useId(),{getRootNode:s}=ne(),{dir:n,locale:o}=ae(),a=A(),m={id:t,ids:{label:a==null?void 0:a.ids.label,input:a==null?void 0:a.ids.control},disabled:a==null?void 0:a.disabled,readOnly:a==null?void 0:a.readOnly,required:a==null?void 0:a.required,invalid:a==null?void 0:a.invalid,dir:n,locale:o,getRootNode:s,...r},u=oe(yr,m);return fr(u,ie)},Te=i.forwardRef((r,t)=>{const[s,n]=E()(r,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),o=Nr(s),a=h(o.getRootProps(),n);return e.jsx(ve,{value:o,children:e.jsx(x.div,{...a,ref:t})})});Te.displayName="NumberInputRoot";const Ae=i.forwardRef((r,t)=>{const[{value:s},n]=E()(r,["value"]),o=h(s.getRootProps(),n);return e.jsx(ve,{value:s,children:e.jsx(x.div,{...o,ref:t})})});Ae.displayName="NumberInputRootProvider";const Se=i.forwardRef((r,t)=>{const s=P(),n=h(s.getScrubberProps(),r);return e.jsx(x.div,{...n,ref:t})});Se.displayName="NumberInputScrubber";const Ue=i.forwardRef((r,t)=>{const{children:s,...n}=r,o=P(),a=h(o.getValueTextProps(),n);return e.jsx(x.span,{...a,ref:t,children:s||o.value})});Ue.displayName="NumberInputValueText";const Me=i.forwardRef(function(t,s){const n=Ge({key:"checkmark",recipe:t.recipe}),[o,a]=n.splitVariantProps(t),{checked:m,indeterminate:u,disabled:c,unstyled:p,children:I,...y}=a,N=p?qe:n(o);return e.jsx(se.svg,{ref:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3px",strokeLinecap:"round",strokeLinejoin:"round","data-state":u?"indeterminate":m?"checked":"unchecked","data-disabled":Ze(c),css:[N,t.css],...y,children:u?e.jsx("path",{d:"M5 12h14"}):m?e.jsx("polyline",{points:"20 6 9 17 4 12"}):null})});Me.displayName="Checkmark";const{withProvider:He,withContext:F,useStyles:Oe}=ce({key:"checkboxCard"});He(ke,"root",{forwardAsChild:!0});const wr=He(ye,"root",{forwardAsChild:!0}),Rr=F(fe,"label",{forwardAsChild:!0});i.forwardRef(function(t,s){const n=Oe(),o=S();return e.jsx(se.div,{ref:s,"data-scope":"checkbox-card","data-part":"description",...t,css:[n.description,t.css],"data-disabled":o.disabled?"":void 0,"data-state":o.checked?"checked":"unchecked"})});const Dr=F(be,"control",{forwardAsChild:!0});F("div","content");const Tr=i.forwardRef(function(t,s){const n=S(),o=Oe();return e.jsx(Me,{ref:s,checked:n.checked,indeterminate:n.indeterminate,disabled:n.disabled,unstyled:!0,"data-scope":"checkbox-card","data-part":"indicator",...t,css:[o.indicator,t.css]})});F("div","addon");const Ar=Ce,{withContext:Sr}=_e({key:"input"}),$e=Sr(Pe),{withProvider:Be,withContext:v}=ce({key:"numberInput"});Be(Ae,"root",{forwardAsChild:!0});const Le=Be(Te,"root",{forwardAsChild:!0});v(De,"label",{forwardAsChild:!0});const ze=v(Re,"input",{forwardAsChild:!0}),Ur=v(we,"incrementTrigger",{forwardAsChild:!0,defaultProps:{children:e.jsx(Ye,{})}}),Mr=v(Ne,"decrementTrigger",{forwardAsChild:!0,defaultProps:{children:e.jsx(Je,{})}}),Ee=v(Ie,"control",{forwardAsChild:!0,defaultProps:{children:e.jsxs(e.Fragment,{children:[e.jsx(Ur,{}),e.jsx(Mr,{})]})}});v(Se,"scrubber",{forwardAsChild:!0});v(Ue,"valueText",{forwardAsChild:!0});const Fe={default:["q w e r t y u i o p","a s d f g h j k l","z x c v b n m","{space} {bksp}"]},V={"{space}":"Space","{enter}":"Enter","{bksp}":"Backspace"},Ve={default:["7 8 9","4 5 6","1 2 3","0 {bksp}"]};function Hr(){const r=ee(c=>c.newUserName),t=ee(c=>c.setNewUserName),{getAllUser:s,createNewUser:n}=J(),{data:o}=O(s),a=i.useRef(null),m=c=>e.jsxs(B,{children:[e.jsx(W,{children:e.jsx(j,{justifyContent:"space-between",children:e.jsxs(j,{alignItems:"center",gap:2,children:[e.jsx(Q,{children:e.jsx(X,{name:c.username})}),e.jsx(k,{children:c.username})]})})}),e.jsx(L,{children:e.jsx(le,{children:de("Pelanggan Sejak:",`${xe(c.createdDate,"PPPP",{locale:me})}`)})})]}),u=async()=>{var p;if(r===""){b.create({title:"username is empty!!",type:"error"});return}await n.mutateAsync({username:r})===0?b.create({title:`Fail to create new customer named ${r}, username Already Taken`,type:"error"}):b.create({title:`Success to create new customer named ${r}`,type:"success"}),t(""),(p=a.current)==null||p.setInput("")};return e.jsxs(g,{className:"create-new-user-tab-content",children:[e.jsx(f,{size:"2xl",children:"Masukan Nama"}),e.jsxs(j,{gap:2,children:[e.jsxs(g,{className:"keyboard-container",children:[e.jsx($e,{defaultValue:"",value:r,size:"2xl",placeholder:"contoh: sukijan",variant:"subtle"}),e.jsx(z,{keyboardRef:c=>a.current=c,onChange:(c,p)=>t(c),onKeyPress:()=>{},layout:Fe,display:V}),e.jsxs(C,{height:"80px",fontSize:"2xl",disabled:r==="",onClick:u,children:[e.jsx(er,{}),"Buat Pelanggan Baru"]})]}),e.jsx(T,{children:o&&o.map(c=>m(c))})]})]})}function Or(){const[r,t]=i.useState(void 0),[s,n]=i.useState(void 0),[o,a]=i.useState(!1),{deleteUser:m}=je(),{upsertUser:u,getAllUser:c}=J(),{data:p,refetch:I}=O(c),y=i.useRef(null),N=d=>{t(d)},K=async()=>{if(!s)return;const d=await m.mutateAsync({userId:s.id});d>0?(b.create({title:`Succes To Delete ${s.username}, ${d}`,type:"success"}),t(void 0),n(void 0),a(!1)):(b.create({title:`Error To Delete ${s.username}`,type:"error"}),t(void 0),n(void 0),a(!1)),await I()},l=async()=>{if(r===void 0)return;if(r.username===""){b.create({title:"Username Cannot Be Empty",type:"info"});return}await u.mutateAsync({user:r})===0?b.create({title:`Fail To Update ${r.username}`,type:"error"}):b.create({title:`Success to update ${r.username}`,type:"success"}),t(void 0)},Z=(d,G=!1)=>e.jsxs(B,{children:[e.jsx(W,{children:e.jsxs(j,{justifyContent:"space-between",children:[e.jsxs(j,{alignItems:"center",gap:2,children:[e.jsx(Q,{children:e.jsx(X,{name:d.username})}),e.jsxs(k,{children:[d.username,d.isActive?"":" (Tidak Aktif)"]})]}),G&&e.jsxs(j,{gap:2,children:[e.jsx(C,{onClick:()=>N(d),children:"Edit"}),Ke(d)]})]})}),e.jsx(L,{children:e.jsx(le,{children:de("Pelanggan Sejak:",`${xe(d.createdDate,"PPPP",{locale:me})}`)})})]}),Ke=d=>e.jsxs(tr,{open:o,onOpenChange:G=>a(G.open),children:[e.jsx(sr,{asChild:!0,children:e.jsx(jr,{onClick:()=>n(d),colorPalette:"red",children:e.jsx(pr,{})})}),e.jsxs(Xe,{children:[e.jsx(nr,{}),e.jsx(ar,{children:e.jsxs(or,{children:[e.jsx(ir,{children:e.jsx(cr,{children:e.jsxs(j,{alignItems:"center",gap:3,children:[e.jsx(xr,{color:"orange",size:"40px"}),"Hapus ",d.username," dan data-nya?"]})})}),e.jsxs(dr,{children:[e.jsx(k,{textStyle:"lg",children:"Seluruh data pelanggan akan dihapus dari database."}),Z(d)]}),e.jsxs(lr,{children:[e.jsx(ur,{asChild:!0,children:e.jsx(C,{variant:"outline",children:"Batal"})}),e.jsx(C,{colorPalette:"red",onClick:()=>K(),children:"Hapus"})]}),e.jsx(hr,{asChild:!0,children:e.jsx(gr,{size:"sm"})})]})})]})]});return i.useEffect(()=>{var d;r&&y.current&&((d=y.current)==null||d.setInput(r.username))},[r]),p?e.jsxs(j,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Pilih Pelanggan"}),e.jsx(T,{leftNavigation:!0,children:p.map(d=>Z(d,!0))})]}),e.jsxs(g,{visibility:r?"visible":"hidden",children:[e.jsx(f,{children:"Nama Pelanggan"}),e.jsxs(B,{width:"700px",children:[e.jsx(W,{children:e.jsxs(f,{children:["Editing ",r==null?void 0:r.username]})}),e.jsxs(L,{gap:5,children:[e.jsx(H,{children:e.jsx($e,{value:r==null?void 0:r.username,size:"2xl",placeholder:"contoh: sukijan",variant:"subtle"})}),e.jsxs(H,{children:[e.jsx(f,{children:"Status"}),e.jsxs(wr,{onCheckedChange:()=>r&&t({...r,isActive:!r.isActive}),checked:r==null?void 0:r.isActive,children:[e.jsx(Ar,{}),e.jsxs(Dr,{children:[e.jsx(Rr,{children:r!=null&&r.isActive?"Aktif":"Non-Aktif"}),e.jsx(Tr,{})]})]})]}),e.jsx(z,{keyboardRef:d=>y.current=d,layout:Fe,display:V,onKeyPress:()=>{},onChange:d=>r&&t({...r,username:d})}),e.jsx(C,{height:"80px",fontSize:"2xl",onClick:()=>l(),children:"Update Customer"})]})]})]})]}):e.jsxs(g,{children:[e.jsx(Qe,{}),e.jsx(k,{children:"User Empty"})]})}const q=1e4;function $r(){const r=i.useRef(null),[t,s]=i.useState(void 0),{getAllUser:n}=J(),{getAllUserMoneyHistory:o}=je(),{data:a,refetch:m}=O(n),{data:u,refetch:c}=O(o(t==null?void 0:t.id)),[p,I]=i.useState(0),y=()=>{if(p<q){b.create({title:`Minimum ${w(q)}`,type:"error"});return}if(t&&p>=q){mr.addMoney(t.id,p).then(l=>s(l)),b.create({title:`Berhasil Menambahakan ${w(p)} ke ${t.username}`,type:"success"});return}};i.useEffect(()=>{var l;m(),c(),I(0),(l=r.current)==null||l.setInput("0")},[t]);const N=()=>e.jsx(g,{maxWidth:"400px",children:e.jsx(T,{title:"Uang Pelanggan",minHeight:"70vh",leftNavigation:!0,children:a==null?void 0:a.map(l=>e.jsx(B,{children:e.jsx(L,{children:e.jsxs(j,{justifyContent:"space-between",children:[e.jsxs(g,{children:[e.jsxs(j,{alignItems:"center",gap:5,children:[e.jsx(Q,{children:e.jsx(X,{name:l.username})}),e.jsx(k,{children:l.username})]}),e.jsxs(k,{children:["Pelanggan Sejak ",_(l.createdDate)]}),e.jsxs(k,{children:[l.money<0?"Hutang":"Uang"," ",w(l.money)]})]}),e.jsx(C,{onClick:()=>s(l),children:"Choose"})]})})}))})}),K=()=>e.jsxs(g,{children:[t&&u&&u.length>0&&e.jsx(H,{children:e.jsx(T,{maxHeight:"300px",title:"Catatan transaksi",children:e.jsxs(ue,{stickyHeader:!0,children:[e.jsx(he,{children:e.jsxs($,{children:[e.jsx(R,{children:"Tanggal"}),e.jsx(R,{children:"Jumlah uang"}),e.jsx(R,{children:"Keterangan"})]})}),e.jsx(pe,{children:u.map(l=>e.jsxs($,{children:[e.jsx(D,{children:_(l.date)}),e.jsx(D,{children:w(l.moneyAmount)}),e.jsxs(D,{children:[l.description.toLocaleLowerCase().includes("paying")||l.description.toLocaleLowerCase().includes("Dept")?e.jsx(re,{colorPalette:"green",children:"Pay"}):e.jsx(re,{colorPalette:"blue",children:"Add"})," ",l.description]})]}))})]})})}),u&&u.length<=0&&t&&e.jsxs(e.Fragment,{children:[e.jsx(f,{size:"4xl",children:e.jsxs(j,{gap:5,alignItems:"center",children:[e.jsx(rr,{}),t==null?void 0:t.username," tidak punya uang"]})}),e.jsx("hr",{})]}),e.jsxs(g,{visibility:t?"":"hidden",children:[e.jsxs(f,{children:["Tambahkan ",t==null?void 0:t.username," uang"]}),e.jsxs(Le,{value:p.toString(),formatOptions:{style:"currency",currency:"IDR"},children:[e.jsx(Ee,{}),e.jsx(ze,{fontSize:"2xl"})]}),e.jsx(z,{keyboardRef:l=>r.current=l,layout:Ve,display:V,onChange:l=>I(Number(l)),onKeyPress:()=>{}}),e.jsx(C,{height:"80px",fontSize:"2xl",onClick:()=>y(),children:"Add Money"})]})]});return e.jsxs(j,{gap:"150px",children:[N(),K()]})}function Br(){const r=i.useRef(null),[t,s]=i.useState(0),[n,o]=i.useState([]),a=()=>{te.getAllDregPrice().then(c=>o(c))},m=()=>{var c;if(t<=0){b.create({title:"Harga Tidak Boleh Kurang Dari nol (0)",type:"error"});return}te.updateDregPrice(t).then(p=>a()),(c=r.current)==null||c.setInput("0"),s(0)};i.useEffect(()=>{a()},[]);const u=()=>e.jsx(T,{children:e.jsxs(ue,{stickyHeader:!0,children:[e.jsx(he,{children:e.jsxs($,{children:[e.jsx(R,{children:"Tanggal"}),e.jsx(R,{children:"Harga"})]})}),e.jsx(pe,{children:n.map(c=>e.jsxs($,{children:[e.jsx(D,{children:_(c.createdDate)}),e.jsx(D,{children:w(c.price)})]}))})]})});return e.jsxs(g,{children:[e.jsx(f,{children:"Harga Baru"}),e.jsxs(j,{children:[e.jsxs(g,{children:[e.jsxs(Le,{defaultValue:"0",value:t.toString(),formatOptions:{style:"currency",currency:"IDR"},children:[e.jsx(Ee,{}),e.jsx(ze,{fontSize:"2xl"})]}),e.jsx(z,{keyboardRef:c=>r.current=c,layout:Ve,display:V,onChange:c=>s(Number(c)),onKeyPress:()=>{}}),e.jsx(C,{height:"80px",fontSize:"2xl",onClick:()=>m(),children:"Ganti Harga"})]}),e.jsx(g,{children:u()})]})]})}const ut=We(function(){return e.jsx(H,{children:e.jsxs(kr,{defaultValue:"Create New Customer",children:[e.jsxs(Pr,{children:[e.jsx(U,{fontSize:"xl",value:"Create New Customer",children:"Create New Customer"}),e.jsx(U,{fontSize:"xl",value:"Update Customer",children:"Update Customer"}),e.jsx(U,{fontSize:"xl",value:"Customer Money",children:"Customer Money"}),e.jsx(U,{fontSize:"xl",value:"Update Dreg Price",children:"Update Dreg Price"})]}),e.jsx(M,{value:"Create New Customer",children:e.jsx(Hr,{})}),e.jsx(M,{value:"Update Customer",children:e.jsx(Or,{})}),e.jsx(M,{value:"Customer Money",children:e.jsx($r,{})}),e.jsx(M,{value:"Update Dreg Price",children:e.jsx(Br,{})})]})})});export{ut as default};
