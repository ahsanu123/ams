import{r as Ie,ar as Gt,as as _t,at as Bt,au as $t,O as Wt,P as jt,K as Oe,av as ee,aw as te,e as zt,f as Ut,c as Kt,Y as qt,a1 as Je,ax as Yt,ay as Qe,X as Xt,S as Me,az as Jt,aA as T,aB as Qt,W as Zt,F as Ze,h as ei,I as ti,o as ii,n as ni,H as si,a as Te}from"./Toaster-D9QYH5nK.js";const ri=["top","right","bottom","left"],X=Math.min,M=Math.max,be=Math.round,pe=Math.floor,$=e=>({x:e,y:e}),oi={left:"right",right:"left",bottom:"top",top:"bottom"},li={start:"end",end:"start"};function ke(e,n,t){return M(e,X(n,t))}function K(e,n){return typeof e=="function"?e(n):e}function q(e){return e.split("-")[0]}function le(e){return e.split("-")[1]}function We(e){return e==="x"?"y":"x"}function je(e){return e==="y"?"height":"width"}const ai=new Set(["top","bottom"]);function B(e){return ai.has(q(e))?"y":"x"}function ze(e){return We(B(e))}function ci(e,n,t){t===void 0&&(t=!1);const i=le(e),s=ze(e),r=je(s);let o=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return n.reference[r]>n.floating[r]&&(o=Ee(o)),[o,Ee(o)]}function ui(e){const n=Ee(e);return[Fe(e),n,Fe(n)]}function Fe(e){return e.replace(/start|end/g,n=>li[n])}const et=["left","right"],tt=["right","left"],di=["top","bottom"],hi=["bottom","top"];function fi(e,n,t){switch(e){case"top":case"bottom":return t?n?tt:et:n?et:tt;case"left":case"right":return n?di:hi;default:return[]}}function gi(e,n,t,i){const s=le(e);let r=fi(q(e),t==="start",i);return s&&(r=r.map(o=>o+"-"+s),n&&(r=r.concat(r.map(Fe)))),r}function Ee(e){return e.replace(/left|right|bottom|top/g,n=>oi[n])}function mi(e){return{top:0,right:0,bottom:0,left:0,...e}}function vt(e){return typeof e!="number"?mi(e):{top:e,right:e,bottom:e,left:e}}function Ce(e){const{x:n,y:t,width:i,height:s}=e;return{width:i,height:s,top:t,left:n,right:n+i,bottom:t+s,x:n,y:t}}function it(e,n,t){let{reference:i,floating:s}=e;const r=B(n),o=ze(n),l=je(o),a=q(n),c=r==="y",d=i.x+i.width/2-s.width/2,h=i.y+i.height/2-s.height/2,p=i[l]/2-s[l]/2;let f;switch(a){case"top":f={x:d,y:i.y-s.height};break;case"bottom":f={x:d,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:h};break;case"left":f={x:i.x-s.width,y:h};break;default:f={x:i.x,y:i.y}}switch(le(n)){case"start":f[o]-=p*(t&&c?-1:1);break;case"end":f[o]+=p*(t&&c?-1:1);break}return f}const pi=async(e,n,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=t,l=r.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(n));let c=await o.getElementRects({reference:e,floating:n,strategy:s}),{x:d,y:h}=it(c,i,a),p=i,f={},m=0;for(let v=0;v<l.length;v++){const{name:I,fn:w}=l[v],{x:b,y:x,data:E,reset:C}=await w({x:d,y:h,initialPlacement:i,placement:p,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:n}});d=b??d,h=x??h,f={...f,[I]:{...f[I],...E}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(c=C.rects===!0?await o.getElementRects({reference:e,floating:n,strategy:s}):C.rects),{x:d,y:h}=it(c,p,a)),v=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}};async function fe(e,n){var t;n===void 0&&(n={});const{x:i,y:s,platform:r,rects:o,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=K(n,e),m=vt(f),I=l[p?h==="floating"?"reference":"floating":h],w=Ce(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(I)))==null||t?I:I.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:a})),b=h==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),E=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},C=Ce(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:x,strategy:a}):b);return{top:(w.top-C.top+m.top)/E.y,bottom:(C.bottom-w.bottom+m.bottom)/E.y,left:(w.left-C.left+m.left)/E.x,right:(C.right-w.right+m.right)/E.x}}const vi=e=>({name:"arrow",options:e,async fn(n){const{x:t,y:i,placement:s,rects:r,platform:o,elements:l,middlewareData:a}=n,{element:c,padding:d=0}=K(e,n)||{};if(c==null)return{};const h=vt(d),p={x:t,y:i},f=ze(s),m=je(f),v=await o.getDimensions(c),I=f==="y",w=I?"top":"left",b=I?"bottom":"right",x=I?"clientHeight":"clientWidth",E=r.reference[m]+r.reference[f]-p[f]-r.floating[m],C=p[f]-r.reference[f],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let N=R?R[x]:0;(!N||!await(o.isElement==null?void 0:o.isElement(R)))&&(N=l.floating[x]||r.floating[m]);const L=E/2-C/2,g=N/2-v[m]/2-1,y=X(h[w],g),O=X(h[b],g),S=y,V=N-v[m]-O,A=N/2-v[m]/2+L,Q=ke(S,A,V),z=!a.arrow&&le(s)!=null&&A!==Q&&r.reference[m]/2-(A<S?y:O)-v[m]/2<0,F=z?A<S?A-S:A-V:0;return{[f]:p[f]+F,data:{[f]:Q,centerOffset:A-Q-F,...z&&{alignmentOffset:F}},reset:z}}}),yi=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var t,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:l,platform:a,elements:c}=n,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...I}=K(e,n);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const w=q(s),b=B(l),x=q(l)===l,E=await(a.isRTL==null?void 0:a.isRTL(c.floating)),C=p||(x||!v?[Ee(l)]:ui(l)),R=m!=="none";!p&&R&&C.push(...gi(l,v,m,E));const N=[l,...C],L=await fe(n,I),g=[];let y=((i=r.flip)==null?void 0:i.overflows)||[];if(d&&g.push(L[w]),h){const A=ci(s,o,E);g.push(L[A[0]],L[A[1]])}if(y=[...y,{placement:s,overflows:g}],!g.every(A=>A<=0)){var O,S;const A=(((O=r.flip)==null?void 0:O.index)||0)+1,Q=N[A];if(Q&&(!(h==="alignment"?b!==B(Q):!1)||y.every(H=>B(H.placement)===b?H.overflows[0]>0:!0)))return{data:{index:A,overflows:y},reset:{placement:Q}};let z=(S=y.filter(F=>F.overflows[0]<=0).sort((F,H)=>F.overflows[1]-H.overflows[1])[0])==null?void 0:S.placement;if(!z)switch(f){case"bestFit":{var V;const F=(V=y.filter(H=>{if(R){const Y=B(H.placement);return Y===b||Y==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(Y=>Y>0).reduce((Y,Ht)=>Y+Ht,0)]).sort((H,Y)=>H[1]-Y[1])[0])==null?void 0:V[0];F&&(z=F);break}case"initialPlacement":z=l;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function nt(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function st(e){return ri.some(n=>e[n]>=0)}const Ii=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:t}=n,{strategy:i="referenceHidden",...s}=K(e,n);switch(i){case"referenceHidden":{const r=await fe(n,{...s,elementContext:"reference"}),o=nt(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:st(o)}}}case"escaped":{const r=await fe(n,{...s,altBoundary:!0}),o=nt(r,t.floating);return{data:{escapedOffsets:o,escaped:st(o)}}}default:return{}}}}},yt=new Set(["left","top"]);async function wi(e,n){const{placement:t,platform:i,elements:s}=e,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=q(t),l=le(t),a=B(t)==="y",c=yt.has(o)?-1:1,d=r&&a?-1:1,h=K(n,e);let{mainAxis:p,crossAxis:f,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof m=="number"&&(f=l==="end"?m*-1:m),a?{x:f*d,y:p*c}:{x:p*c,y:f*d}}const xi=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var t,i;const{x:s,y:r,placement:o,middlewareData:l}=n,a=await wi(n,e);return o===((t=l.offset)==null?void 0:t.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:s+a.x,y:r+a.y,data:{...a,placement:o}}}}},bi=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:t,y:i,placement:s}=n,{mainAxis:r=!0,crossAxis:o=!1,limiter:l={fn:I=>{let{x:w,y:b}=I;return{x:w,y:b}}},...a}=K(e,n),c={x:t,y:i},d=await fe(n,a),h=B(q(s)),p=We(h);let f=c[p],m=c[h];if(r){const I=p==="y"?"top":"left",w=p==="y"?"bottom":"right",b=f+d[I],x=f-d[w];f=ke(b,f,x)}if(o){const I=h==="y"?"top":"left",w=h==="y"?"bottom":"right",b=m+d[I],x=m-d[w];m=ke(b,m,x)}const v=l.fn({...n,[p]:f,[h]:m});return{...v,data:{x:v.x-t,y:v.y-i,enabled:{[p]:r,[h]:o}}}}}},Ei=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:t,y:i,placement:s,rects:r,middlewareData:o}=n,{offset:l=0,mainAxis:a=!0,crossAxis:c=!0}=K(e,n),d={x:t,y:i},h=B(s),p=We(h);let f=d[p],m=d[h];const v=K(l,n),I=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(a){const x=p==="y"?"height":"width",E=r.reference[p]-r.floating[x]+I.mainAxis,C=r.reference[p]+r.reference[x]-I.mainAxis;f<E?f=E:f>C&&(f=C)}if(c){var w,b;const x=p==="y"?"width":"height",E=yt.has(q(s)),C=r.reference[h]-r.floating[x]+(E&&((w=o.offset)==null?void 0:w[h])||0)+(E?0:I.crossAxis),R=r.reference[h]+r.reference[x]+(E?0:((b=o.offset)==null?void 0:b[h])||0)-(E?I.crossAxis:0);m<C?m=C:m>R&&(m=R)}return{[p]:f,[h]:m}}}},Ci=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var t,i;const{placement:s,rects:r,platform:o,elements:l}=n,{apply:a=()=>{},...c}=K(e,n),d=await fe(n,c),h=q(s),p=le(s),f=B(s)==="y",{width:m,height:v}=r.floating;let I,w;h==="top"||h==="bottom"?(I=h,w=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,I=p==="end"?"top":"bottom");const b=v-d.top-d.bottom,x=m-d.left-d.right,E=X(v-d[I],b),C=X(m-d[w],x),R=!n.middlewareData.shift;let N=E,L=C;if((t=n.middlewareData.shift)!=null&&t.enabled.x&&(L=x),(i=n.middlewareData.shift)!=null&&i.enabled.y&&(N=b),R&&!p){const y=M(d.left,0),O=M(d.right,0),S=M(d.top,0),V=M(d.bottom,0);f?L=m-2*(y!==0||O!==0?y+O:M(d.left,d.right)):N=v-2*(S!==0||V!==0?S+V:M(d.top,d.bottom))}await a({...n,availableWidth:L,availableHeight:N});const g=await o.getDimensions(l.floating);return m!==g.width||v!==g.height?{reset:{rects:!0}}:{}}}};function Ne(){return typeof window<"u"}function ae(e){return It(e)?(e.nodeName||"").toLowerCase():"#document"}function k(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function j(e){var n;return(n=(It(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function It(e){return Ne()?e instanceof Node||e instanceof k(e).Node:!1}function G(e){return Ne()?e instanceof Element||e instanceof k(e).Element:!1}function W(e){return Ne()?e instanceof HTMLElement||e instanceof k(e).HTMLElement:!1}function rt(e){return!Ne()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof k(e).ShadowRoot}const Oi=new Set(["inline","contents"]);function me(e){const{overflow:n,overflowX:t,overflowY:i,display:s}=_(e);return/auto|scroll|overlay|hidden|clip/.test(n+i+t)&&!Oi.has(s)}const Ti=new Set(["table","td","th"]);function Ni(e){return Ti.has(ae(e))}const Ri=[":popover-open",":modal"];function Re(e){return Ri.some(n=>{try{return e.matches(n)}catch{return!1}})}const Si=["transform","translate","scale","rotate","perspective"],Ai=["transform","translate","scale","rotate","perspective","filter"],Vi=["paint","layout","strict","content"];function Ue(e){const n=Ke(),t=G(e)?_(e):e;return Si.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!n&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!n&&(t.filter?t.filter!=="none":!1)||Ai.some(i=>(t.willChange||"").includes(i))||Vi.some(i=>(t.contain||"").includes(i))}function Pi(e){let n=J(e);for(;W(n)&&!oe(n);){if(Ue(n))return n;if(Re(n))return null;n=J(n)}return null}function Ke(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Li=new Set(["html","body","#document"]);function oe(e){return Li.has(ae(e))}function _(e){return k(e).getComputedStyle(e)}function Se(e){return G(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function J(e){if(ae(e)==="html")return e;const n=e.assignedSlot||e.parentNode||rt(e)&&e.host||j(e);return rt(n)?n.host:n}function wt(e){const n=J(e);return oe(n)?e.ownerDocument?e.ownerDocument.body:e.body:W(n)&&me(n)?n:wt(n)}function ge(e,n,t){var i;n===void 0&&(n=[]),t===void 0&&(t=!0);const s=wt(e),r=s===((i=e.ownerDocument)==null?void 0:i.body),o=k(s);if(r){const l=He(o);return n.concat(o,o.visualViewport||[],me(s)?s:[],l&&t?ge(l):[])}return n.concat(s,ge(s,[],t))}function He(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xt(e){const n=_(e);let t=parseFloat(n.width)||0,i=parseFloat(n.height)||0;const s=W(e),r=s?e.offsetWidth:t,o=s?e.offsetHeight:i,l=be(t)!==r||be(i)!==o;return l&&(t=r,i=o),{width:t,height:i,$:l}}function qe(e){return G(e)?e:e.contextElement}function re(e){const n=qe(e);if(!W(n))return $(1);const t=n.getBoundingClientRect(),{width:i,height:s,$:r}=xt(n);let o=(r?be(t.width):t.width)/i,l=(r?be(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Di=$(0);function bt(e){const n=k(e);return!Ke()||!n.visualViewport?Di:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function Mi(e,n,t){return n===void 0&&(n=!1),!t||n&&t!==k(e)?!1:n}function ne(e,n,t,i){n===void 0&&(n=!1),t===void 0&&(t=!1);const s=e.getBoundingClientRect(),r=qe(e);let o=$(1);n&&(i?G(i)&&(o=re(i)):o=re(e));const l=Mi(r,t,i)?bt(r):$(0);let a=(s.left+l.x)/o.x,c=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(r){const p=k(r),f=i&&G(i)?k(i):i;let m=p,v=He(m);for(;v&&i&&f!==m;){const I=re(v),w=v.getBoundingClientRect(),b=_(v),x=w.left+(v.clientLeft+parseFloat(b.paddingLeft))*I.x,E=w.top+(v.clientTop+parseFloat(b.paddingTop))*I.y;a*=I.x,c*=I.y,d*=I.x,h*=I.y,a+=x,c+=E,m=k(v),v=He(m)}}return Ce({width:d,height:h,x:a,y:c})}function Ae(e,n){const t=Se(e).scrollLeft;return n?n.left+t:ne(j(e)).left+t}function Et(e,n){const t=e.getBoundingClientRect(),i=t.left+n.scrollLeft-Ae(e,t),s=t.top+n.scrollTop;return{x:i,y:s}}function ki(e){let{elements:n,rect:t,offsetParent:i,strategy:s}=e;const r=s==="fixed",o=j(i),l=n?Re(n.floating):!1;if(i===o||l&&r)return t;let a={scrollLeft:0,scrollTop:0},c=$(1);const d=$(0),h=W(i);if((h||!h&&!r)&&((ae(i)!=="body"||me(o))&&(a=Se(i)),W(i))){const f=ne(i);c=re(i),d.x=f.x+i.clientLeft,d.y=f.y+i.clientTop}const p=o&&!h&&!r?Et(o,a):$(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-a.scrollLeft*c.x+d.x+p.x,y:t.y*c.y-a.scrollTop*c.y+d.y+p.y}}function Fi(e){return Array.from(e.getClientRects())}function Hi(e){const n=j(e),t=Se(e),i=e.ownerDocument.body,s=M(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth),r=M(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+Ae(e);const l=-t.scrollTop;return _(i).direction==="rtl"&&(o+=M(n.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:l}}const ot=25;function Gi(e,n){const t=k(e),i=j(e),s=t.visualViewport;let r=i.clientWidth,o=i.clientHeight,l=0,a=0;if(s){r=s.width,o=s.height;const d=Ke();(!d||d&&n==="fixed")&&(l=s.offsetLeft,a=s.offsetTop)}const c=Ae(i);if(c<=0){const d=i.ownerDocument,h=d.body,p=getComputedStyle(h),f=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(i.clientWidth-h.clientWidth-f);m<=ot&&(r-=m)}else c<=ot&&(r+=c);return{width:r,height:o,x:l,y:a}}const _i=new Set(["absolute","fixed"]);function Bi(e,n){const t=ne(e,!0,n==="fixed"),i=t.top+e.clientTop,s=t.left+e.clientLeft,r=W(e)?re(e):$(1),o=e.clientWidth*r.x,l=e.clientHeight*r.y,a=s*r.x,c=i*r.y;return{width:o,height:l,x:a,y:c}}function lt(e,n,t){let i;if(n==="viewport")i=Gi(e,t);else if(n==="document")i=Hi(j(e));else if(G(n))i=Bi(n,t);else{const s=bt(e);i={x:n.x-s.x,y:n.y-s.y,width:n.width,height:n.height}}return Ce(i)}function Ct(e,n){const t=J(e);return t===n||!G(t)||oe(t)?!1:_(t).position==="fixed"||Ct(t,n)}function $i(e,n){const t=n.get(e);if(t)return t;let i=ge(e,[],!1).filter(l=>G(l)&&ae(l)!=="body"),s=null;const r=_(e).position==="fixed";let o=r?J(e):e;for(;G(o)&&!oe(o);){const l=_(o),a=Ue(o);!a&&l.position==="fixed"&&(s=null),(r?!a&&!s:!a&&l.position==="static"&&!!s&&_i.has(s.position)||me(o)&&!a&&Ct(e,o))?i=i.filter(d=>d!==o):s=l,o=J(o)}return n.set(e,i),i}function Wi(e){let{element:n,boundary:t,rootBoundary:i,strategy:s}=e;const o=[...t==="clippingAncestors"?Re(n)?[]:$i(n,this._c):[].concat(t),i],l=o[0],a=o.reduce((c,d)=>{const h=lt(n,d,s);return c.top=M(h.top,c.top),c.right=X(h.right,c.right),c.bottom=X(h.bottom,c.bottom),c.left=M(h.left,c.left),c},lt(n,l,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function ji(e){const{width:n,height:t}=xt(e);return{width:n,height:t}}function zi(e,n,t){const i=W(n),s=j(n),r=t==="fixed",o=ne(e,!0,r,n);let l={scrollLeft:0,scrollTop:0};const a=$(0);function c(){a.x=Ae(s)}if(i||!i&&!r)if((ae(n)!=="body"||me(s))&&(l=Se(n)),i){const f=ne(n,!0,r,n);a.x=f.x+n.clientLeft,a.y=f.y+n.clientTop}else s&&c();r&&!i&&s&&c();const d=s&&!i&&!r?Et(s,l):$(0),h=o.left+l.scrollLeft-a.x-d.x,p=o.top+l.scrollTop-a.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function Pe(e){return _(e).position==="static"}function at(e,n){if(!W(e)||_(e).position==="fixed")return null;if(n)return n(e);let t=e.offsetParent;return j(e)===t&&(t=t.ownerDocument.body),t}function Ot(e,n){const t=k(e);if(Re(e))return t;if(!W(e)){let s=J(e);for(;s&&!oe(s);){if(G(s)&&!Pe(s))return s;s=J(s)}return t}let i=at(e,n);for(;i&&Ni(i)&&Pe(i);)i=at(i,n);return i&&oe(i)&&Pe(i)&&!Ue(i)?t:i||Pi(e)||t}const Ui=async function(e){const n=this.getOffsetParent||Ot,t=this.getDimensions,i=await t(e.floating);return{reference:zi(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Ki(e){return _(e).direction==="rtl"}const qi={convertOffsetParentRelativeRectToViewportRelativeRect:ki,getDocumentElement:j,getClippingRect:Wi,getOffsetParent:Ot,getElementRects:Ui,getClientRects:Fi,getDimensions:ji,getScale:re,isElement:G,isRTL:Ki};function Tt(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function Yi(e,n){let t=null,i;const s=j(e);function r(){var l;clearTimeout(i),(l=t)==null||l.disconnect(),t=null}function o(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),r();const c=e.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=c;if(l||n(),!p||!f)return;const m=pe(h),v=pe(s.clientWidth-(d+p)),I=pe(s.clientHeight-(h+f)),w=pe(d),x={rootMargin:-m+"px "+-v+"px "+-I+"px "+-w+"px",threshold:M(0,X(1,a))||1};let E=!0;function C(R){const N=R[0].intersectionRatio;if(N!==a){if(!E)return o();N?o(!1,N):i=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!Tt(c,e.getBoundingClientRect())&&o(),E=!1}try{t=new IntersectionObserver(C,{...x,root:s.ownerDocument})}catch{t=new IntersectionObserver(C,x)}t.observe(e)}return o(!0),r}function Xi(e,n,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,c=qe(e),d=s||r?[...c?ge(c):[],...ge(n)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",t,{passive:!0}),r&&w.addEventListener("resize",t)});const h=c&&l?Yi(c,t):null;let p=-1,f=null;o&&(f=new ResizeObserver(w=>{let[b]=w;b&&b.target===c&&f&&(f.unobserve(n),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var x;(x=f)==null||x.observe(n)})),t()}),c&&!a&&f.observe(c),f.observe(n));let m,v=a?ne(e):null;a&&I();function I(){const w=ne(e);v&&!Tt(v,w)&&t(),v=w,m=requestAnimationFrame(I)}return t(),()=>{var w;d.forEach(b=>{s&&b.removeEventListener("scroll",t),r&&b.removeEventListener("resize",t)}),h==null||h(),(w=f)==null||w.disconnect(),f=null,a&&cancelAnimationFrame(m)}}const Ji=xi,Qi=bi,Zi=yi,en=Ci,tn=Ii,nn=vi,sn=Ei,rn=(e,n,t)=>{const i=new Map,s={platform:qi,...t},r={...s.platform,_c:i};return pi(e,n,{...s,platform:r})};function ct(e=0,n=0,t=0,i=0){if(typeof DOMRect=="function")return new DOMRect(e,n,t,i);const s={x:e,y:n,width:t,height:i,top:n,right:e+t,bottom:n+i,left:e};return{...s,toJSON:()=>s}}function on(e){if(!e)return ct();const{x:n,y:t,width:i,height:s}=e;return ct(n,t,i,s)}function ln(e,n){return{contextElement:_t(e)?e:void 0,getBoundingClientRect:()=>{const t=e,i=n==null?void 0:n(t);return i||!t?on(i):t.getBoundingClientRect()}}}var ce=e=>({variable:e,reference:`var(${e})`}),U={arrowSize:ce("--arrow-size"),arrowSizeHalf:ce("--arrow-size-half"),arrowBg:ce("--arrow-background"),transformOrigin:ce("--transform-origin"),arrowOffset:ce("--arrow-offset")},an=e=>e==="top"||e==="bottom"?"y":"x";function cn(e,n){return{name:"transformOrigin",fn(t){var g,y,O,S;const{elements:i,middlewareData:s,placement:r,rects:o,y:l}=t,a=r.split("-")[0],c=an(a),d=((g=s.arrow)==null?void 0:g.x)||0,h=((y=s.arrow)==null?void 0:y.y)||0,p=(n==null?void 0:n.clientWidth)||0,f=(n==null?void 0:n.clientHeight)||0,m=d+p/2,v=h+f/2,I=Math.abs(((O=s.shift)==null?void 0:O.y)||0),w=o.reference.height/2,b=f/2,x=((S=e.offset)==null?void 0:S.mainAxis)??e.gutter,E=typeof x=="number"?x+b:x??b,C=I>E,R={top:`${m}px calc(100% + ${E}px)`,bottom:`${m}px ${-E}px`,left:`calc(100% + ${E}px) ${v}px`,right:`${-E}px ${v}px`}[a],N=`${m}px ${o.reference.y+w-l}px`,L=!!e.overlap&&c==="y"&&C;return i.floating.style.setProperty(U.transformOrigin.variable,L?N:R),{data:{transformOrigin:L?N:R}}}}}var un={name:"rects",fn({rects:e}){return{data:e}}},dn=e=>{if(e)return{name:"shiftArrow",fn({placement:n,middlewareData:t}){if(!t.arrow)return{};const{x:i,y:s}=t.arrow,r=n.split("-")[0];return Object.assign(e.style,{left:i!=null?`${i}px`:"",top:s!=null?`${s}px`:"",[r]:`calc(100% + ${U.arrowOffset.reference})`}),{}}}};function hn(e){const[n,t]=e.split("-");return{side:n,align:t,hasAlign:t!=null}}function Xn(e){return e.split("-")[0]}var fn={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function ut(e,n){const t=e.devicePixelRatio||1;return Math.round(n*t)/t}function Ye(e){return typeof e=="function"?e():e==="clipping-ancestors"?"clippingAncestors":e}function gn(e,n,t){const i=e||n.createElement("div");return nn({element:i,padding:t.arrowPadding})}function mn(e,n){if(!Bt(n.offset??n.gutter))return Ji(({placement:t})=>{var c,d;const i=((e==null?void 0:e.clientHeight)||0)/2,s=((c=n.offset)==null?void 0:c.mainAxis)??n.gutter,r=typeof s=="number"?s+i:s??i,{hasAlign:o}=hn(t),l=o?void 0:n.shift,a=((d=n.offset)==null?void 0:d.crossAxis)??l;return $t({crossAxis:a,mainAxis:r,alignmentAxis:n.shift})})}function pn(e){if(!e.flip)return;const n=Ye(e.boundary);return Zi({...n?{boundary:n}:void 0,padding:e.overflowPadding,fallbackPlacements:e.flip===!0?void 0:e.flip})}function vn(e){if(!e.slide&&!e.overlap)return;const n=Ye(e.boundary);return Qi({...n?{boundary:n}:void 0,mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding,limiter:sn()})}function yn(e){return en({padding:e.overflowPadding,apply({elements:n,rects:t,availableHeight:i,availableWidth:s}){const r=n.floating,o=Math.round(t.reference.width),l=Math.round(t.reference.height);s=Math.floor(s),i=Math.floor(i),r.style.setProperty("--reference-width",`${o}px`),r.style.setProperty("--reference-height",`${l}px`),r.style.setProperty("--available-width",`${s}px`),r.style.setProperty("--available-height",`${i}px`)}})}function In(e){if(e.hideWhenDetached)return tn({strategy:"referenceHidden",boundary:Ye(e.boundary)??"clippingAncestors"})}function wn(e){return e?e===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:e:{}}function xn(e,n,t={}){const i=ln(e,t.getAnchorRect);if(!n||!i)return;const s=Object.assign({},fn,t),r=n.querySelector("[data-part=arrow]"),o=[mn(r,s),pn(s),vn(s),gn(r,n.ownerDocument,s),dn(r),cn({gutter:s.gutter,offset:s.offset,overlap:s.overlap},r),yn(s),In(s),un],{placement:l,strategy:a,onComplete:c,onPositioned:d}=s,h=async()=>{var E;if(!i||!n)return;const v=await rn(i,n,{placement:l,middleware:o,strategy:a});c==null||c(v),d==null||d({placed:!0});const I=Wt(n),w=ut(I,v.x),b=ut(I,v.y);n.style.setProperty("--x",`${w}px`),n.style.setProperty("--y",`${b}px`),s.hideWhenDetached&&(((E=v.middlewareData.hide)==null?void 0:E.referenceHidden)?(n.style.setProperty("visibility","hidden"),n.style.setProperty("pointer-events","none")):(n.style.removeProperty("visibility"),n.style.removeProperty("pointer-events")));const x=n.firstElementChild;if(x){const C=jt(x);n.style.setProperty("--z-index",C.zIndex)}},p=async()=>{t.updatePosition?(await t.updatePosition({updatePosition:h,floatingElement:n}),d==null||d({placed:!0})):await h()},f=wn(s.listeners),m=s.listeners?Xi(i,n,p,f):Gt;return p(),()=>{m==null||m(),d==null||d({placed:!1})}}function dt(e,n,t={}){const{defer:i,...s}=t,r=i?Ie:l=>l(),o=[];return o.push(r(()=>{const l=typeof e=="function"?e():e,a=typeof n=="function"?n():n;o.push(xn(l,a,s))})),()=>{o.forEach(l=>l==null?void 0:l())}}var bn={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function En(e={}){const{placement:n,sameWidth:t,fitViewport:i,strategy:s="absolute"}=e;return{arrow:{position:"absolute",width:U.arrowSize.reference,height:U.arrowSize.reference,[U.arrowSizeHalf.variable]:`calc(${U.arrowSize.reference} / 2)`,[U.arrowOffset.variable]:`calc(${U.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:n?bn[n.split("-")[0]]:void 0,background:U.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:s,isolation:"isolate",minWidth:t?void 0:"max-content",width:t?"var(--reference-width)":void 0,maxWidth:i?"var(--available-width)":void 0,maxHeight:i?"var(--available-height)":void 0,pointerEvents:n?void 0:"none",top:"0px",left:"0px",transform:n?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}var Cn=Object.defineProperty,On=(e,n,t)=>n in e?Cn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,u=(e,n,t)=>On(e,typeof n!="symbol"?n+"":n,t),we={itemToValue(e){return typeof e=="string"?e:ee(e)&&te(e,"value")?e.value:""},itemToString(e){return typeof e=="string"?e:ee(e)&&te(e,"label")?e.label:we.itemToValue(e)},isItemDisabled(e){return ee(e)&&te(e,"disabled")?!!e.disabled:!1}},Nt=class Rt{constructor(n){this.options=n,u(this,"items"),u(this,"indexMap",null),u(this,"copy",t=>new Rt({...this.options,items:t??[...this.items]})),u(this,"isEqual",t=>Oe(this.items,t.items)),u(this,"setItems",t=>this.copy(t)),u(this,"getValues",(t=this.items)=>{const i=[];for(const s of t){const r=this.getItemValue(s);r!=null&&i.push(r)}return i}),u(this,"find",t=>{if(t==null)return null;const i=this.indexOf(t);return i!==-1?this.at(i):null}),u(this,"findMany",t=>{const i=[];for(const s of t){const r=this.find(s);r!=null&&i.push(r)}return i}),u(this,"at",t=>{if(!this.options.groupBy&&!this.options.groupSort)return this.items[t]??null;let i=0;const s=this.group();for(const[,r]of s)for(const o of r){if(i===t)return o;i++}return null}),u(this,"sortFn",(t,i)=>{const s=this.indexOf(t),r=this.indexOf(i);return(s??0)-(r??0)}),u(this,"sort",t=>[...t].sort(this.sortFn.bind(this))),u(this,"getItemValue",t=>{var i,s;return t==null?null:((s=(i=this.options).itemToValue)==null?void 0:s.call(i,t))??we.itemToValue(t)}),u(this,"getItemDisabled",t=>{var i,s;return t==null?!1:((s=(i=this.options).isItemDisabled)==null?void 0:s.call(i,t))??we.isItemDisabled(t)}),u(this,"stringifyItem",t=>{var i,s;return t==null?null:((s=(i=this.options).itemToString)==null?void 0:s.call(i,t))??we.itemToString(t)}),u(this,"stringify",t=>t==null?null:this.stringifyItem(this.find(t))),u(this,"stringifyItems",(t,i=", ")=>{const s=[];for(const r of t){const o=this.stringifyItem(r);o!=null&&s.push(o)}return s.join(i)}),u(this,"stringifyMany",(t,i)=>this.stringifyItems(this.findMany(t),i)),u(this,"has",t=>this.indexOf(t)!==-1),u(this,"hasItem",t=>t==null?!1:this.has(this.getItemValue(t))),u(this,"group",()=>{const{groupBy:t,groupSort:i}=this.options;if(!t)return[["",[...this.items]]];const s=new Map;this.items.forEach((o,l)=>{const a=t(o,l);s.has(a)||s.set(a,[]),s.get(a).push(o)});let r=Array.from(s.entries());return i&&r.sort(([o],[l])=>{if(typeof i=="function")return i(o,l);if(Array.isArray(i)){const a=i.indexOf(o),c=i.indexOf(l);return a===-1?1:c===-1?-1:a-c}return i==="asc"?o.localeCompare(l):i==="desc"?l.localeCompare(o):0}),r}),u(this,"getNextValue",(t,i=1,s=!1)=>{let r=this.indexOf(t);if(r===-1)return null;for(r=s?Math.min(r+i,this.size-1):r+i;r<=this.size&&this.getItemDisabled(this.at(r));)r++;return this.getItemValue(this.at(r))}),u(this,"getPreviousValue",(t,i=1,s=!1)=>{let r=this.indexOf(t);if(r===-1)return null;for(r=s?Math.max(r-i,0):r-i;r>=0&&this.getItemDisabled(this.at(r));)r--;return this.getItemValue(this.at(r))}),u(this,"indexOf",t=>{if(t==null)return-1;if(!this.options.groupBy&&!this.options.groupSort)return this.items.findIndex(i=>this.getItemValue(i)===t);if(!this.indexMap){this.indexMap=new Map;let i=0;const s=this.group();for(const[,r]of s)for(const o of r){const l=this.getItemValue(o);l!=null&&this.indexMap.set(l,i),i++}}return this.indexMap.get(t)??-1}),u(this,"getByText",(t,i)=>{const s=i!=null?this.indexOf(i):-1,r=t.length===1;for(let o=0;o<this.items.length;o++){const l=this.items[(s+o+1)%this.items.length];if(!(r&&this.getItemValue(l)===i)&&!this.getItemDisabled(l)&&Tn(this.stringifyItem(l),t))return l}}),u(this,"search",(t,i)=>{const{state:s,currentValue:r,timeout:o=350}=i,l=s.keysSoFar+t,c=l.length>1&&Array.from(l).every(m=>m===l[0])?l[0]:l,d=this.getByText(c,r),h=this.getItemValue(d);function p(){clearTimeout(s.timer),s.timer=-1}function f(m){s.keysSoFar=m,p(),m!==""&&(s.timer=+setTimeout(()=>{f(""),p()},o))}return f(l),h}),u(this,"update",(t,i)=>{let s=this.indexOf(t);return s===-1?this:this.copy([...this.items.slice(0,s),i,...this.items.slice(s+1)])}),u(this,"upsert",(t,i,s="append")=>{let r=this.indexOf(t);return r===-1?(s==="append"?this.append:this.prepend)(i):this.copy([...this.items.slice(0,r),i,...this.items.slice(r+1)])}),u(this,"insert",(t,...i)=>this.copy(ue(this.items,t,...i))),u(this,"insertBefore",(t,...i)=>{let s=this.indexOf(t);if(s===-1)if(this.items.length===0)s=0;else return this;return this.copy(ue(this.items,s,...i))}),u(this,"insertAfter",(t,...i)=>{let s=this.indexOf(t);if(s===-1)if(this.items.length===0)s=0;else return this;return this.copy(ue(this.items,s+1,...i))}),u(this,"prepend",(...t)=>this.copy(ue(this.items,0,...t))),u(this,"append",(...t)=>this.copy(ue(this.items,this.items.length,...t))),u(this,"filter",t=>{const i=this.items.filter((s,r)=>t(this.stringifyItem(s),r,s));return this.copy(i)}),u(this,"remove",(...t)=>{const i=t.map(s=>typeof s=="string"?s:this.getItemValue(s));return this.copy(this.items.filter(s=>{const r=this.getItemValue(s);return r==null?!1:!i.includes(r)}))}),u(this,"move",(t,i)=>{const s=this.indexOf(t);return s===-1?this:this.copy(ve(this.items,[s],i))}),u(this,"moveBefore",(t,...i)=>{let s=this.items.findIndex(o=>this.getItemValue(o)===t);if(s===-1)return this;let r=i.map(o=>this.items.findIndex(l=>this.getItemValue(l)===o)).sort((o,l)=>o-l);return this.copy(ve(this.items,r,s))}),u(this,"moveAfter",(t,...i)=>{let s=this.items.findIndex(o=>this.getItemValue(o)===t);if(s===-1)return this;let r=i.map(o=>this.items.findIndex(l=>this.getItemValue(l)===o)).sort((o,l)=>o-l);return this.copy(ve(this.items,r,s+1))}),u(this,"reorder",(t,i)=>this.copy(ve(this.items,[t],i))),u(this,"compareValue",(t,i)=>{const s=this.indexOf(t),r=this.indexOf(i);return s<r?-1:s>r?1:0}),u(this,"range",(t,i)=>{let s=[],r=t;for(;r!=null;){if(this.find(r)&&s.push(r),r===i)return s;r=this.getNextValue(r)}return[]}),u(this,"getValueRange",(t,i)=>t&&i?this.compareValue(t,i)<=0?this.range(t,i):this.range(i,t):[]),u(this,"toString",()=>{let t="";for(const i of this.items){const s=this.getItemValue(i),r=this.stringifyItem(i),o=this.getItemDisabled(i),l=[s,r,o].filter(Boolean).join(":");t+=l+","}return t}),u(this,"toJSON",()=>({size:this.size,first:this.firstValue,last:this.lastValue})),this.items=[...n.items]}get size(){return this.items.length}get firstValue(){let n=0;for(;this.getItemDisabled(this.at(n));)n++;return this.getItemValue(this.at(n))}get lastValue(){let n=this.size-1;for(;this.getItemDisabled(this.at(n));)n--;return this.getItemValue(this.at(n))}*[Symbol.iterator](){yield*this.items}},Tn=(e,n)=>!!(e!=null&&e.toLowerCase().startsWith(n.toLowerCase()));function ue(e,n,...t){return[...e.slice(0,n),...t,...e.slice(n)]}function ve(e,n,t){n=[...n].sort((s,r)=>s-r);const i=n.map(s=>e[s]);for(let s=n.length-1;s>=0;s--)e=[...e.slice(0,n[s]),...e.slice(n[s]+1)];return t=Math.max(0,t-n.filter(s=>s<t).length),[...e.slice(0,t),...i,...e.slice(t)]}var Jn=class xe extends Set{constructor(n=[]){super(n),u(this,"selectionMode","single"),u(this,"deselectable",!0),u(this,"copy",()=>{const t=new xe([...this]);return this.sync(t)}),u(this,"sync",t=>(t.selectionMode=this.selectionMode,t.deselectable=this.deselectable,t)),u(this,"isEmpty",()=>this.size===0),u(this,"isSelected",t=>this.selectionMode==="none"||t==null?!1:this.has(t)),u(this,"canSelect",(t,i)=>this.selectionMode!=="none"||!t.getItemDisabled(t.find(i))),u(this,"firstSelectedValue",t=>{let i=null;for(let s of this)(!i||t.compareValue(s,i)<0)&&(i=s);return i}),u(this,"lastSelectedValue",t=>{let i=null;for(let s of this)(!i||t.compareValue(s,i)>0)&&(i=s);return i}),u(this,"extendSelection",(t,i,s)=>{if(this.selectionMode==="none")return this;if(this.selectionMode==="single")return this.replaceSelection(t,s);const r=this.copy(),o=Array.from(this).pop();for(let l of t.getValueRange(i,o??s))r.delete(l);for(let l of t.getValueRange(s,i))this.canSelect(t,l)&&r.add(l);return r}),u(this,"toggleSelection",(t,i)=>{if(this.selectionMode==="none")return this;if(this.selectionMode==="single"&&!this.isSelected(i))return this.replaceSelection(t,i);const s=this.copy();return s.has(i)?s.delete(i):s.canSelect(t,i)&&s.add(i),s}),u(this,"replaceSelection",(t,i)=>{if(this.selectionMode==="none")return this;if(i==null)return this;if(!this.canSelect(t,i))return this;const s=new xe([i]);return this.sync(s)}),u(this,"setSelection",t=>{if(this.selectionMode==="none")return this;let i=new xe;for(let s of t)if(s!=null&&(i.add(s),this.selectionMode==="single"))break;return this.sync(i)}),u(this,"clearSelection",()=>{const t=this.copy();return t.deselectable&&t.size>0&&t.clear(),t}),u(this,"select",(t,i,s)=>this.selectionMode==="none"?this:this.selectionMode==="single"?this.isSelected(i)&&this.deselectable?this.toggleSelection(t,i):this.replaceSelection(t,i):this.selectionMode==="multiple"||s?this.toggleSelection(t,i):this.replaceSelection(t,i)),u(this,"deselect",t=>{const i=this.copy();return i.delete(t),i}),u(this,"isEqual",t=>Oe(Array.from(this),Array.from(t)))}};function St(e,n,t){for(let i=0;i<n.length;i++)e=t.getChildren(e,n.slice(i+1))[n[i]];return e}function Nn(e){const n=Rn(e),t=[],i=new Set;for(const s of n){const r=s.join();i.has(r)||(i.add(r),t.push(s))}return t}function At(e,n){for(let t=0;t<Math.min(e.length,n.length);t++){if(e[t]<n[t])return-1;if(e[t]>n[t])return 1}return e.length-n.length}function Rn(e){return e.sort(At)}function Sn(e,n){let t;return D(e,{...n,onEnter:(i,s)=>{if(n.predicate(i,s))return t=i,"stop"}}),t}function An(e,n){const t=[];return D(e,{onEnter:(i,s)=>{n.predicate(i,s)&&t.push(i)},getChildren:n.getChildren}),t}function ht(e,n){let t;return D(e,{onEnter:(i,s)=>{if(n.predicate(i,s))return t=[...s],"stop"},getChildren:n.getChildren}),t}function Vn(e,n){let t=n.initialResult;return D(e,{...n,onEnter:(i,s)=>{t=n.nextResult(t,i,s)}}),t}function Pn(e,n){return Vn(e,{...n,initialResult:[],nextResult:(t,i,s)=>(t.push(...n.transform(i,s)),t)})}function Ln(e,n){const{predicate:t,create:i,getChildren:s}=n,r=(o,l)=>{const a=s(o,l),c=[];a.forEach((f,m)=>{const v=[...l,m],I=r(f,v);I&&c.push(I)});const d=l.length===0,h=t(o,l),p=c.length>0;return d||h||p?i(o,c,l):null};return r(e,[])||i(e,[],[])}function Dn(e,n){const t=[];let i=0;const s=new Map,r=new Map;return D(e,{getChildren:n.getChildren,onEnter:(o,l)=>{s.has(o)||s.set(o,i++);const a=n.getChildren(o,l);a.forEach(f=>{r.has(f)||r.set(f,o),s.has(f)||s.set(f,i++)});const c=a.length>0?a.map(f=>s.get(f)):void 0,d=r.get(o),h=d?s.get(d):void 0,p=s.get(o);t.push({...o,_children:c,_parent:h,_index:p})}}),t}function Mn(e,n){return{type:"insert",index:e,nodes:n}}function kn(e){return{type:"remove",indexes:e}}function Xe(){return{type:"replace"}}function Vt(e){return[e.slice(0,-1),e[e.length-1]]}function Pt(e,n,t=new Map){var o;const[i,s]=Vt(e);for(let l=i.length-1;l>=0;l--){const a=i.slice(0,l).join();switch((o=t.get(a))==null?void 0:o.type){case"remove":continue}t.set(a,Xe())}const r=t.get(i.join());switch(r==null?void 0:r.type){case"remove":t.set(i.join(),{type:"removeThenInsert",removeIndexes:r.indexes,insertIndex:s,insertNodes:n});break;default:t.set(i.join(),Mn(s,n))}return t}function Lt(e){const n=new Map,t=new Map;for(const i of e){const s=i.slice(0,-1).join(),r=t.get(s)??[];r.push(i[i.length-1]),t.set(s,r.sort((o,l)=>o-l))}for(const i of e)for(let s=i.length-2;s>=0;s--){const r=i.slice(0,s).join();n.has(r)||n.set(r,Xe())}for(const[i,s]of t)n.set(i,kn(s));return n}function Fn(e,n){const t=new Map,[i,s]=Vt(e);for(let r=i.length-1;r>=0;r--){const o=i.slice(0,r).join();t.set(o,Xe())}return t.set(i.join(),{type:"removeThenInsert",removeIndexes:[s],insertIndex:s,insertNodes:[n]}),t}function Ve(e,n,t){return Hn(e,{...t,getChildren:(i,s)=>{const r=s.join(),o=n.get(r);switch(o==null?void 0:o.type){case"replace":case"remove":case"removeThenInsert":case"insert":return t.getChildren(i,s);default:return[]}},transform:(i,s,r)=>{const o=r.join(),l=n.get(o);switch(l==null?void 0:l.type){case"remove":return t.create(i,s.filter((d,h)=>!l.indexes.includes(h)),r);case"removeThenInsert":const a=s.filter((d,h)=>!l.removeIndexes.includes(h)),c=l.removeIndexes.reduce((d,h)=>h<d?d-1:d,l.insertIndex);return t.create(i,ft(a,c,0,...l.insertNodes),r);case"insert":return t.create(i,ft(s,l.index,0,...l.nodes),r);case"replace":return t.create(i,s,r);default:return i}}})}function ft(e,n,t,...i){return[...e.slice(0,n),...i,...e.slice(n+t)]}function Hn(e,n){const t={};return D(e,{...n,onLeave:(i,s)=>{const r=[0,...s],o=r.join(),l=n.transform(i,t[o]??[],s),a=r.slice(0,-1).join(),c=t[a]??[];c.push(l),t[a]=c}}),t[""][0]}function Gn(e,n){const{nodes:t,at:i}=n;if(i.length===0)throw new Error("Can't insert nodes at the root");const s=Pt(i,t);return Ve(e,s,n)}function _n(e,n){if(n.at.length===0)return n.node;const t=Fn(n.at,n.node);return Ve(e,t,n)}function Bn(e,n){if(n.indexPaths.length===0)return e;for(const i of n.indexPaths)if(i.length===0)throw new Error("Can't remove the root node");const t=Lt(n.indexPaths);return Ve(e,t,n)}function $n(e,n){if(n.indexPaths.length===0)return e;for(const r of n.indexPaths)if(r.length===0)throw new Error("Can't move the root node");if(n.to.length===0)throw new Error("Can't move nodes to the root");const t=Nn(n.indexPaths),i=t.map(r=>St(e,r,n)),s=Pt(n.to,i,Lt(t));return Ve(e,s,n)}function D(e,n){const{onEnter:t,onLeave:i,getChildren:s}=n;let r=[],o=[{node:e}];const l=n.reuseIndexPath?()=>r:()=>r.slice();for(;o.length>0;){let a=o[o.length-1];if(a.state===void 0){const d=t==null?void 0:t(a.node,l());if(d==="stop")return;a.state=d==="skip"?-1:0}const c=a.children||s(a.node,l());if(a.children||(a.children=c),a.state!==-1){if(a.state<c.length){let h=a.state;r.push(h),o.push({node:c[h]}),a.state=h+1;continue}if((i==null?void 0:i(a.node,l()))==="stop")return}r.pop(),o.pop()}}var Qn=class Dt{constructor(n){this.options=n,u(this,"rootNode"),u(this,"isEqual",t=>Oe(this.rootNode,t.rootNode)),u(this,"getNodeChildren",t=>{var i,s;return((s=(i=this.options).nodeToChildren)==null?void 0:s.call(i,t))??se.nodeToChildren(t)??[]}),u(this,"resolveIndexPath",t=>typeof t=="string"?this.getIndexPath(t):t),u(this,"resolveNode",t=>{const i=this.resolveIndexPath(t);return i?this.at(i):void 0}),u(this,"getNodeChildrenCount",t=>{var i,s;return((s=(i=this.options).nodeToChildrenCount)==null?void 0:s.call(i,t))??se.nodeToChildrenCount(t)}),u(this,"getNodeValue",t=>{var i,s;return((s=(i=this.options).nodeToValue)==null?void 0:s.call(i,t))??se.nodeToValue(t)}),u(this,"getNodeDisabled",t=>{var i,s;return((s=(i=this.options).isNodeDisabled)==null?void 0:s.call(i,t))??se.isNodeDisabled(t)}),u(this,"stringify",t=>{const i=this.findNode(t);return i?this.stringifyNode(i):null}),u(this,"stringifyNode",t=>{var i,s;return((s=(i=this.options).nodeToString)==null?void 0:s.call(i,t))??se.nodeToString(t)}),u(this,"getFirstNode",(t=this.rootNode)=>{let i;return D(t,{getChildren:this.getNodeChildren,onEnter:(s,r)=>{if(!i&&r.length>0&&!this.getNodeDisabled(s))return i=s,"stop"}}),i}),u(this,"getLastNode",(t=this.rootNode,i={})=>{let s;return D(t,{getChildren:this.getNodeChildren,onEnter:(r,o)=>{var l;if(!this.isSameNode(r,t)){if((l=i.skip)!=null&&l.call(i,{value:this.getNodeValue(r),node:r,indexPath:o}))return"skip";o.length>0&&!this.getNodeDisabled(r)&&(s=r)}}}),s}),u(this,"at",t=>St(this.rootNode,t,{getChildren:this.getNodeChildren})),u(this,"findNode",(t,i=this.rootNode)=>Sn(i,{getChildren:this.getNodeChildren,predicate:s=>this.getNodeValue(s)===t})),u(this,"findNodes",(t,i=this.rootNode)=>{const s=new Set(t.filter(r=>r!=null));return An(i,{getChildren:this.getNodeChildren,predicate:r=>s.has(this.getNodeValue(r))})}),u(this,"sort",t=>t.reduce((i,s)=>{const r=this.getIndexPath(s);return r&&i.push({value:s,indexPath:r}),i},[]).sort((i,s)=>At(i.indexPath,s.indexPath)).map(({value:i})=>i)),u(this,"getIndexPath",t=>ht(this.rootNode,{getChildren:this.getNodeChildren,predicate:i=>this.getNodeValue(i)===t})),u(this,"getValue",t=>{const i=this.at(t);return i?this.getNodeValue(i):void 0}),u(this,"getValuePath",t=>{if(!t)return[];const i=[];let s=[...t];for(;s.length>0;){const r=this.at(s);r&&i.unshift(this.getNodeValue(r)),s.pop()}return i}),u(this,"getDepth",t=>{const i=ht(this.rootNode,{getChildren:this.getNodeChildren,predicate:s=>this.getNodeValue(s)===t});return(i==null?void 0:i.length)??0}),u(this,"isSameNode",(t,i)=>this.getNodeValue(t)===this.getNodeValue(i)),u(this,"isRootNode",t=>this.isSameNode(t,this.rootNode)),u(this,"contains",(t,i)=>!t||!i?!1:i.slice(0,t.length).every((s,r)=>t[r]===i[r])),u(this,"getNextNode",(t,i={})=>{let s=!1,r;return D(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{var c;if(this.isRootNode(o))return;const a=this.getNodeValue(o);if((c=i.skip)!=null&&c.call(i,{value:a,node:o,indexPath:l}))return a===t&&(s=!0),"skip";if(s&&!this.getNodeDisabled(o))return r=o,"stop";a===t&&(s=!0)}}),r}),u(this,"getPreviousNode",(t,i={})=>{let s,r=!1;return D(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{var c;if(this.isRootNode(o))return;const a=this.getNodeValue(o);if((c=i.skip)!=null&&c.call(i,{value:a,node:o,indexPath:l}))return"skip";if(a===t)return r=!0,"stop";this.getNodeDisabled(o)||(s=o)}}),r?s:void 0}),u(this,"getParentNodes",t=>{var r;const i=(r=this.resolveIndexPath(t))==null?void 0:r.slice();if(!i)return[];const s=[];for(;i.length>0;){i.pop();const o=this.at(i);o&&!this.isRootNode(o)&&s.unshift(o)}return s}),u(this,"getDescendantNodes",(t,i)=>{const s=this.resolveNode(t);if(!s)return[];const r=[];return D(s,{getChildren:this.getNodeChildren,onEnter:(o,l)=>{l.length!==0&&(!(i!=null&&i.withBranch)&&this.isBranchNode(o)||r.push(o))}}),r}),u(this,"getDescendantValues",(t,i)=>this.getDescendantNodes(t,i).map(r=>this.getNodeValue(r))),u(this,"getParentIndexPath",t=>t.slice(0,-1)),u(this,"getParentNode",t=>{const i=this.resolveIndexPath(t);return i?this.at(this.getParentIndexPath(i)):void 0}),u(this,"visit",t=>{const{skip:i,...s}=t;D(this.rootNode,{...s,getChildren:this.getNodeChildren,onEnter:(r,o)=>{var l;if(!this.isRootNode(r))return i!=null&&i({value:this.getNodeValue(r),node:r,indexPath:o})?"skip":(l=s.onEnter)==null?void 0:l.call(s,r,o)}})}),u(this,"getPreviousSibling",t=>{const i=this.getParentNode(t);if(!i)return;const s=this.getNodeChildren(i);let r=t[t.length-1];for(;--r>=0;){const o=s[r];if(!this.getNodeDisabled(o))return o}}),u(this,"getNextSibling",t=>{const i=this.getParentNode(t);if(!i)return;const s=this.getNodeChildren(i);let r=t[t.length-1];for(;++r<s.length;){const o=s[r];if(!this.getNodeDisabled(o))return o}}),u(this,"getSiblingNodes",t=>{const i=this.getParentNode(t);return i?this.getNodeChildren(i):[]}),u(this,"getValues",(t=this.rootNode)=>Pn(t,{getChildren:this.getNodeChildren,transform:s=>[this.getNodeValue(s)]}).slice(1)),u(this,"isValidDepth",(t,i)=>i==null?!0:typeof i=="function"?i(t.length):t.length===i),u(this,"isBranchNode",t=>this.getNodeChildren(t).length>0||this.getNodeChildrenCount(t)!=null),u(this,"getBranchValues",(t=this.rootNode,i={})=>{let s=[];return D(t,{getChildren:this.getNodeChildren,onEnter:(r,o)=>{var a;if(o.length===0)return;const l=this.getNodeValue(r);if((a=i.skip)!=null&&a.call(i,{value:l,node:r,indexPath:o}))return"skip";this.isBranchNode(r)&&this.isValidDepth(o,i.depth)&&s.push(this.getNodeValue(r))}}),s}),u(this,"flatten",(t=this.rootNode)=>Dn(t,{getChildren:this.getNodeChildren})),u(this,"_create",(t,i)=>this.getNodeChildren(t).length>0||i.length>0?{...t,children:i}:{...t}),u(this,"_insert",(t,i,s)=>this.copy(Gn(t,{at:i,nodes:s,getChildren:this.getNodeChildren,create:this._create}))),u(this,"copy",t=>new Dt({...this.options,rootNode:t})),u(this,"_replace",(t,i,s)=>this.copy(_n(t,{at:i,node:s,getChildren:this.getNodeChildren,create:this._create}))),u(this,"_move",(t,i,s)=>this.copy($n(t,{indexPaths:i,to:s,getChildren:this.getNodeChildren,create:this._create}))),u(this,"_remove",(t,i)=>this.copy(Bn(t,{indexPaths:i,getChildren:this.getNodeChildren,create:this._create}))),u(this,"replace",(t,i)=>this._replace(this.rootNode,t,i)),u(this,"remove",t=>this._remove(this.rootNode,t)),u(this,"insertBefore",(t,i)=>this.getParentNode(t)?this._insert(this.rootNode,t,i):void 0),u(this,"insertAfter",(t,i)=>{if(!this.getParentNode(t))return;const r=[...t.slice(0,-1),t[t.length-1]+1];return this._insert(this.rootNode,r,i)}),u(this,"move",(t,i)=>this._move(this.rootNode,t,i)),u(this,"filter",t=>{const i=Ln(this.rootNode,{predicate:t,getChildren:this.getNodeChildren,create:this._create});return this.copy(i)}),u(this,"toJSON",()=>this.getValues(this.rootNode)),this.rootNode=n.rootNode}},se={nodeToValue(e){return typeof e=="string"?e:ee(e)&&te(e,"value")?e.value:""},nodeToString(e){return typeof e=="string"?e:ee(e)&&te(e,"label")?e.label:se.nodeToValue(e)},isNodeDisabled(e){return ee(e)&&te(e,"disabled")?!!e.disabled:!1},nodeToChildren(e){return e.children},nodeToChildrenCount(e){if(ee(e)&&te(e,"childrenCount"))return e.childrenCount}},Wn=Kt("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),P=Wn.build(),Mt=e=>new Nt(e);Mt.empty=()=>new Nt({items:[]});var jn=e=>{var n;return((n=e.ids)==null?void 0:n.root)??`select:${e.id}`},Ge=e=>{var n;return((n=e.ids)==null?void 0:n.content)??`select:${e.id}:content`},_e=e=>{var n;return((n=e.ids)==null?void 0:n.trigger)??`select:${e.id}:trigger`},kt=e=>{var n;return((n=e.ids)==null?void 0:n.clearTrigger)??`select:${e.id}:clear-trigger`},ye=e=>{var n;return((n=e.ids)==null?void 0:n.label)??`select:${e.id}:label`},zn=e=>{var n;return((n=e.ids)==null?void 0:n.control)??`select:${e.id}:control`},Be=(e,n)=>{var t,i;return((i=(t=e.ids)==null?void 0:t.item)==null?void 0:i.call(t,n))??`select:${e.id}:option:${n}`},$e=e=>{var n;return((n=e.ids)==null?void 0:n.hiddenSelect)??`select:${e.id}:select`},Ft=e=>{var n;return((n=e.ids)==null?void 0:n.positioner)??`select:${e.id}:positioner`},Un=(e,n)=>{var t,i;return((i=(t=e.ids)==null?void 0:t.itemGroup)==null?void 0:i.call(t,n))??`select:${e.id}:optgroup:${n}`},gt=(e,n)=>{var t,i;return((i=(t=e.ids)==null?void 0:t.itemGroupLabel)==null?void 0:i.call(t,n))??`select:${e.id}:optgroup-label:${n}`},Le=e=>e.getById($e(e)),de=e=>e.getById(Ge(e)),ie=e=>e.getById(_e(e)),Kn=e=>e.getById(kt(e)),mt=e=>e.getById(Ft(e)),De=(e,n)=>n==null?null:e.getById(Be(e,n));function Zn(e,n){const{context:t,prop:i,scope:s,state:r,computed:o,send:l}=e,a=i("disabled")||t.get("fieldsetDisabled"),c=!!i("invalid"),d=!!i("required"),h=!!i("readOnly"),p=i("composite"),f=i("collection"),m=r.hasTag("open"),v=r.matches("focused"),I=t.get("highlightedValue"),w=t.get("highlightedItem"),b=t.get("selectedItems"),x=t.get("currentPlacement"),E=o("isTypingAhead"),C=o("isInteractive"),R=I?Be(s,I):void 0;function N(g){const y=f.getItemDisabled(g.item),O=f.getItemValue(g.item);return Zt(O,()=>`[zag-js] No value found for item ${JSON.stringify(g.item)}`),{value:O,disabled:!!(a||y),highlighted:I===O,selected:t.get("value").includes(O)}}const L=En({...i("positioning"),placement:x});return{open:m,focused:v,empty:t.get("value").length===0,highlightedItem:w,highlightedValue:I,selectedItems:b,hasSelectedItems:o("hasSelectedItems"),value:t.get("value"),valueAsString:o("valueAsString"),collection:f,multiple:!!i("multiple"),disabled:!!a,reposition(g={}){l({type:"POSITIONING.SET",options:g})},focus(){var g;(g=ie(s))==null||g.focus({preventScroll:!0})},setOpen(g){r.hasTag("open")!==g&&l({type:g?"OPEN":"CLOSE"})},selectValue(g){l({type:"ITEM.SELECT",value:g})},setValue(g){l({type:"VALUE.SET",value:g})},selectAll(){l({type:"VALUE.SET",value:f.getValues()})},setHighlightValue(g){l({type:"HIGHLIGHTED_VALUE.SET",value:g})},clearHighlightValue(){l({type:"HIGHLIGHTED_VALUE.CLEAR"})},clearValue(g){l(g?{type:"ITEM.CLEAR",value:g}:{type:"VALUE.CLEAR"})},getItemState:N,getRootProps(){return n.element({...P.root.attrs,dir:i("dir"),id:jn(s),"data-invalid":T(c),"data-readonly":T(h)})},getLabelProps(){return n.label({dir:i("dir"),id:ye(s),...P.label.attrs,"data-disabled":T(a),"data-invalid":T(c),"data-readonly":T(h),"data-required":T(d),htmlFor:$e(s),onClick(g){var y;g.defaultPrevented||a||(y=ie(s))==null||y.focus({preventScroll:!0})}})},getControlProps(){return n.element({...P.control.attrs,dir:i("dir"),id:zn(s),"data-state":m?"open":"closed","data-focus":T(v),"data-disabled":T(a),"data-invalid":T(c)})},getValueTextProps(){return n.element({...P.valueText.attrs,dir:i("dir"),"data-disabled":T(a),"data-invalid":T(c),"data-focus":T(v)})},getTriggerProps(){return n.button({id:_e(s),disabled:a,dir:i("dir"),type:"button",role:"combobox","aria-controls":Ge(s),"aria-expanded":m,"aria-haspopup":"listbox","data-state":m?"open":"closed","aria-invalid":c,"aria-required":d,"aria-labelledby":ye(s),...P.trigger.attrs,"data-disabled":T(a),"data-invalid":T(c),"data-readonly":T(h),"data-placement":x,"data-placeholder-shown":T(!o("hasSelectedItems")),onClick(g){C&&(g.defaultPrevented||l({type:"TRIGGER.CLICK"}))},onFocus(){l({type:"TRIGGER.FOCUS"})},onBlur(){l({type:"TRIGGER.BLUR"})},onKeyDown(g){if(g.defaultPrevented||!C)return;const O={ArrowUp(){l({type:"TRIGGER.ARROW_UP"})},ArrowDown(S){l({type:S.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){l({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){l({type:"TRIGGER.ARROW_RIGHT"})},Home(){l({type:"TRIGGER.HOME"})},End(){l({type:"TRIGGER.END"})},Enter(){l({type:"TRIGGER.ENTER"})},Space(S){l(E?{type:"TRIGGER.TYPEAHEAD",key:S.key}:{type:"TRIGGER.ENTER"})}}[Qe(g,{dir:i("dir"),orientation:"vertical"})];if(O){O(g),g.preventDefault();return}Me.isValidEvent(g)&&(l({type:"TRIGGER.TYPEAHEAD",key:g.key}),g.preventDefault())}})},getIndicatorProps(){return n.element({...P.indicator.attrs,dir:i("dir"),"aria-hidden":!0,"data-state":m?"open":"closed","data-disabled":T(a),"data-invalid":T(c),"data-readonly":T(h)})},getItemProps(g){const y=N(g);return n.element({id:Be(s,y.value),role:"option",...P.item.attrs,dir:i("dir"),"data-value":y.value,"aria-selected":y.selected,"data-state":y.selected?"checked":"unchecked","data-highlighted":T(y.highlighted),"data-disabled":T(y.disabled),"aria-disabled":Qt(y.disabled),onPointerMove(O){y.disabled||O.pointerType!=="mouse"||y.value!==I&&l({type:"ITEM.POINTER_MOVE",value:y.value})},onClick(O){O.defaultPrevented||y.disabled||l({type:"ITEM.CLICK",src:"pointerup",value:y.value})},onPointerLeave(O){var V;y.disabled||g.persistFocus||O.pointerType!=="mouse"||!((V=e.event.previous())!=null&&V.type.includes("POINTER"))||l({type:"ITEM.POINTER_LEAVE"})}})},getItemTextProps(g){const y=N(g);return n.element({...P.itemText.attrs,"data-state":y.selected?"checked":"unchecked","data-disabled":T(y.disabled),"data-highlighted":T(y.highlighted)})},getItemIndicatorProps(g){const y=N(g);return n.element({"aria-hidden":!0,...P.itemIndicator.attrs,"data-state":y.selected?"checked":"unchecked",hidden:!y.selected})},getItemGroupLabelProps(g){const{htmlFor:y}=g;return n.element({...P.itemGroupLabel.attrs,id:gt(s,y),dir:i("dir"),role:"presentation"})},getItemGroupProps(g){const{id:y}=g;return n.element({...P.itemGroup.attrs,"data-disabled":T(a),id:Un(s,y),"aria-labelledby":gt(s,y),role:"group",dir:i("dir")})},getClearTriggerProps(){return n.button({...P.clearTrigger.attrs,id:kt(s),type:"button","aria-label":"Clear value","data-invalid":T(c),disabled:a,hidden:!o("hasSelectedItems"),dir:i("dir"),onClick(g){g.defaultPrevented||l({type:"CLEAR.CLICK"})}})},getHiddenSelectProps(){const g=t.get("value"),y=i("multiple")?g:g==null?void 0:g[0];return n.select({name:i("name"),form:i("form"),disabled:a,multiple:i("multiple"),required:i("required"),"aria-hidden":!0,id:$e(s),defaultValue:y,style:Jt,tabIndex:-1,onFocus(){var O;(O=ie(s))==null||O.focus({preventScroll:!0})},"aria-labelledby":ye(s)})},getPositionerProps(){return n.element({...P.positioner.attrs,dir:i("dir"),id:Ft(s),style:L.floating})},getContentProps(){return n.element({hidden:!m,dir:i("dir"),id:Ge(s),role:p?"listbox":"dialog",...P.content.attrs,"data-state":m?"open":"closed","data-placement":x,"data-activedescendant":R,"aria-activedescendant":p?R:void 0,"aria-multiselectable":i("multiple")&&p?!0:void 0,"aria-labelledby":ye(s),tabIndex:0,onKeyDown(g){if(!C||!qt(g.currentTarget,Je(g)))return;if(g.key==="Tab"&&!Yt(g)){g.preventDefault();return}const y={ArrowUp(){l({type:"CONTENT.ARROW_UP"})},ArrowDown(){l({type:"CONTENT.ARROW_DOWN"})},Home(){l({type:"CONTENT.HOME"})},End(){l({type:"CONTENT.END"})},Enter(){l({type:"ITEM.CLICK",src:"keydown.enter"})},Space(V){var A;E?l({type:"CONTENT.TYPEAHEAD",key:V.key}):(A=y.Enter)==null||A.call(y,V)}},O=y[Qe(g)];if(O){O(g),g.preventDefault();return}const S=Je(g);Xt(S)||Me.isValidEvent(g)&&(l({type:"CONTENT.TYPEAHEAD",key:g.key}),g.preventDefault())}})},getListProps(){return n.element({...P.list.attrs,tabIndex:0,role:p?void 0:"listbox","aria-labelledby":_e(s),"aria-activedescendant":p?void 0:R,"aria-multiselectable":!p&&i("multiple")?!0:void 0})}}}var{and:he,not:Z,or:qn}=Ut(),es=zt({props({props:e}){return{loopFocus:!1,closeOnSelect:!e.multiple,composite:!0,defaultValue:[],...e,collection:e.collection??Mt.empty(),positioning:{placement:"bottom-start",gutter:8,...e.positioning}}},context({prop:e,bindable:n}){return{value:n(()=>({defaultValue:e("defaultValue"),value:e("value"),isEqual:Oe,onChange(t){var s;const i=e("collection").findMany(t);return(s=e("onValueChange"))==null?void 0:s({value:t,items:i})}})),highlightedValue:n(()=>({defaultValue:e("defaultHighlightedValue")||null,value:e("highlightedValue"),onChange(t){var i;(i=e("onHighlightChange"))==null||i({highlightedValue:t,highlightedItem:e("collection").find(t),highlightedIndex:e("collection").indexOf(t)})}})),currentPlacement:n(()=>({defaultValue:void 0})),fieldsetDisabled:n(()=>({defaultValue:!1})),highlightedItem:n(()=>({defaultValue:null})),selectedItems:n(()=>{const t=e("value")??e("defaultValue")??[];return{defaultValue:e("collection").findMany(t)}})}},refs(){return{typeahead:{...Me.defaultOptions}}},computed:{hasSelectedItems:({context:e})=>e.get("value").length>0,isTypingAhead:({refs:e})=>e.get("typeahead").keysSoFar!=="",isDisabled:({prop:e,context:n})=>!!e("disabled")||!!n.get("fieldsetDisabled"),isInteractive:({prop:e})=>!(e("disabled")||e("readOnly")),valueAsString:({context:e,prop:n})=>n("collection").stringifyItems(e.get("selectedItems"))},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"idle"},entry:["syncSelectElement"],watch({context:e,prop:n,track:t,action:i}){t([()=>e.get("value").toString()],()=>{i(["syncSelectedItems","syncSelectElement","dispatchChangeEvent"])}),t([()=>n("open")],()=>{i(["toggleVisibility"])}),t([()=>e.get("highlightedValue")],()=>{i(["syncHighlightedItem"])}),t([()=>n("collection").toString()],()=>{i(["syncCollection"])})},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"HIGHLIGHTED_VALUE.CLEAR":{actions:["clearHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]}},effects:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:qn("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:he(Z("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:Z("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:he(Z("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:Z("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:Z("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:Z("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:Z("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],effects:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":[{guard:"restoreFocus",target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},{target:"idle",actions:["clearHighlightedItem"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{guard:"restoreFocus",target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{target:"idle",actions:["invokeOnClose","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:he("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:he("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:he("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{loop:({prop:e})=>!!e("loopFocus"),multiple:({prop:e})=>!!e("multiple"),hasSelectedItems:({computed:e})=>!!e("hasSelectedItems"),hasHighlightedItem:({context:e})=>e.get("highlightedValue")!=null,isFirstItemHighlighted:({context:e,prop:n})=>e.get("highlightedValue")===n("collection").firstValue,isLastItemHighlighted:({context:e,prop:n})=>e.get("highlightedValue")===n("collection").lastValue,closeOnSelect:({prop:e,event:n})=>!!(n.closeOnSelect??e("closeOnSelect")),restoreFocus:({event:e})=>pt(e),isOpenControlled:({prop:e})=>e("open")!==void 0,isTriggerClickEvent:({event:e})=>{var n;return((n=e.previousEvent)==null?void 0:n.type)==="TRIGGER.CLICK"},isTriggerEnterEvent:({event:e})=>{var n;return((n=e.previousEvent)==null?void 0:n.type)==="TRIGGER.ENTER"},isTriggerArrowUpEvent:({event:e})=>{var n;return((n=e.previousEvent)==null?void 0:n.type)==="TRIGGER.ARROW_UP"},isTriggerArrowDownEvent:({event:e})=>{var n;return((n=e.previousEvent)==null?void 0:n.type)==="TRIGGER.ARROW_DOWN"}},effects:{trackFormControlState({context:e,scope:n}){return ni(Le(n),{onFieldsetDisabledChange(t){e.set("fieldsetDisabled",t)},onFormReset(){const t=e.initial("value");e.set("value",t)}})},trackDismissableElement({scope:e,send:n,prop:t}){const i=()=>de(e);let s=!0;return ii(i,{type:"listbox",defer:!0,exclude:[ie(e),Kn(e)],onFocusOutside:t("onFocusOutside"),onPointerDownOutside:t("onPointerDownOutside"),onInteractOutside(r){var o;(o=t("onInteractOutside"))==null||o(r),s=!(r.detail.focusable||r.detail.contextmenu)},onDismiss(){n({type:"CLOSE",src:"interact-outside",restoreFocus:s})}})},computePlacement({context:e,prop:n,scope:t}){const i=n("positioning");return e.set("currentPlacement",i.placement),dt(()=>ie(t),()=>mt(t),{defer:!0,...i,onComplete(o){e.set("currentPlacement",o.placement)}})},scrollToHighlightedItem({context:e,prop:n,scope:t,event:i}){const s=o=>{const l=e.get("highlightedValue");if(l==null||i.current().type.includes("POINTER"))return;const a=de(t),c=n("scrollToIndexFn");if(c){const h=n("collection").indexOf(l);c==null||c({index:h,immediate:o,getElement:()=>De(t,l)});return}const d=De(t,l);si(d,{rootEl:a,block:"nearest"})};return Ie(()=>s(!0)),ti(()=>de(t),{defer:!0,attributes:["data-activedescendant"],callback(){s(!1)}})}},actions:{reposition({context:e,prop:n,scope:t,event:i}){const s=()=>mt(t);dt(ie(t),s,{...n("positioning"),...i.options,defer:!0,listeners:!1,onComplete(r){e.set("currentPlacement",r.placement)}})},toggleVisibility({send:e,prop:n,event:t}){e({type:n("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:t})},highlightPreviousItem({context:e,prop:n}){const t=e.get("highlightedValue");if(t==null)return;const i=n("collection").getPreviousValue(t,1,n("loopFocus"));i!=null&&e.set("highlightedValue",i)},highlightNextItem({context:e,prop:n}){const t=e.get("highlightedValue");if(t==null)return;const i=n("collection").getNextValue(t,1,n("loopFocus"));i!=null&&e.set("highlightedValue",i)},highlightFirstItem({context:e,prop:n}){const t=n("collection").firstValue;e.set("highlightedValue",t)},highlightLastItem({context:e,prop:n}){const t=n("collection").lastValue;e.set("highlightedValue",t)},setInitialFocus({scope:e}){Ie(()=>{const n=ei({root:de(e)});n==null||n.focus({preventScroll:!0})})},focusTriggerEl({event:e,scope:n}){pt(e)&&Ie(()=>{const t=ie(n);t==null||t.focus({preventScroll:!0})})},selectHighlightedItem({context:e,prop:n,event:t}){var r;let i=t.value??e.get("highlightedValue");if(i==null||!n("collection").has(i))return;(r=n("onSelect"))==null||r({value:i}),i=n("deselectable")&&!n("multiple")&&e.get("value").includes(i)?null:i,e.set("value",o=>i==null?[]:n("multiple")?Ze(o,i):[i])},highlightComputedFirstItem({context:e,prop:n,computed:t}){const i=n("collection"),s=t("hasSelectedItems")?i.sort(e.get("value"))[0]:i.firstValue;e.set("highlightedValue",s)},highlightComputedLastItem({context:e,prop:n,computed:t}){const i=n("collection"),s=t("hasSelectedItems")?i.sort(e.get("value"))[0]:i.lastValue;e.set("highlightedValue",s)},highlightFirstSelectedItem({context:e,prop:n,computed:t}){if(!t("hasSelectedItems"))return;const i=n("collection").sort(e.get("value"))[0];e.set("highlightedValue",i)},highlightItem({context:e,event:n}){e.set("highlightedValue",n.value)},highlightMatchingItem({context:e,prop:n,event:t,refs:i}){const s=n("collection").search(t.key,{state:i.get("typeahead"),currentValue:e.get("highlightedValue")});s!=null&&e.set("highlightedValue",s)},setHighlightedItem({context:e,event:n}){e.set("highlightedValue",n.value)},clearHighlightedItem({context:e}){e.set("highlightedValue",null)},selectItem({context:e,prop:n,event:t}){var r;(r=n("onSelect"))==null||r({value:t.value});const s=n("deselectable")&&!n("multiple")&&e.get("value").includes(t.value)?null:t.value;e.set("value",o=>s==null?[]:n("multiple")?Ze(o,s):[s])},clearItem({context:e,event:n}){e.set("value",t=>t.filter(i=>i!==n.value))},setSelectedItems({context:e,event:n}){e.set("value",n.value)},clearSelectedItems({context:e}){e.set("value",[])},selectPreviousItem({context:e,prop:n}){const[t]=e.get("value"),i=n("collection").getPreviousValue(t);i&&e.set("value",[i])},selectNextItem({context:e,prop:n}){const[t]=e.get("value"),i=n("collection").getNextValue(t);i&&e.set("value",[i])},selectFirstItem({context:e,prop:n}){const t=n("collection").firstValue;t&&e.set("value",[t])},selectLastItem({context:e,prop:n}){const t=n("collection").lastValue;t&&e.set("value",[t])},selectMatchingItem({context:e,prop:n,event:t,refs:i}){const s=n("collection").search(t.key,{state:i.get("typeahead"),currentValue:e.get("value")[0]});s!=null&&e.set("value",[s])},scrollContentToTop({prop:e,scope:n}){var t,i;if(e("scrollToIndexFn")){const s=e("collection").firstValue;(t=e("scrollToIndexFn"))==null||t({index:0,immediate:!0,getElement:()=>De(n,s)})}else(i=de(n))==null||i.scrollTo(0,0)},invokeOnOpen({prop:e}){var n;(n=e("onOpenChange"))==null||n({open:!0})},invokeOnClose({prop:e}){var n;(n=e("onOpenChange"))==null||n({open:!1})},syncSelectElement({context:e,prop:n,scope:t}){const i=Le(t);if(i){if(e.get("value").length===0&&!n("multiple")){i.selectedIndex=-1;return}for(const s of i.options)s.selected=e.get("value").includes(s.value)}},syncCollection({context:e,prop:n}){const t=n("collection"),i=t.find(e.get("highlightedValue"));i&&e.set("highlightedItem",i);const s=t.findMany(e.get("value"));e.set("selectedItems",s)},syncSelectedItems({context:e,prop:n}){const t=n("collection"),i=e.get("selectedItems"),r=e.get("value").map(o=>i.find(a=>t.getItemValue(a)===o)||t.find(o));e.set("selectedItems",r)},syncHighlightedItem({context:e,prop:n}){const t=n("collection"),i=e.get("highlightedValue"),s=i?t.find(i):null;e.set("highlightedItem",s)},dispatchChangeEvent({scope:e}){queueMicrotask(()=>{const n=Le(e);if(!n)return;const t=e.getWin(),i=new t.Event("change",{bubbles:!0,composed:!0});n.dispatchEvent(i)})}}}});function pt(e){var t;const n=e.restoreFocus??((t=e.previousEvent)==null?void 0:t.restoreFocus);return n==null||!!n}Te()(["closeOnSelect","collection","composite","defaultHighlightedValue","defaultOpen","defaultValue","deselectable","dir","disabled","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]);Te()(["item","persistFocus"]);Te()(["id"]);Te()(["htmlFor"]);export{Nt as L,Jn as S,Qn as T,Xn as a,Wn as b,Zn as c,nn as d,rn as e,Zi as f,dt as g,_ as h,G as i,Xi as j,es as m,Ji as o};
