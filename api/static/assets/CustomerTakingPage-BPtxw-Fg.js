import{g as x,c as B,m as F,e as O,S as G}from"./stack-CD8du1Wu.js";import{a as C,n as r}from"./chunk-K6CSEXPM-Bn6mf80d.js";import{E as h}from"./header-information-contant-B3N2sSri.js";import"./query-client-B-np7aBl.js";import{u as P,a as b,b as R}from"./user-management-api-CbimgFC6.js";import{u as L,C as v}from"./Calendar-C7hCejGk.js";import{V as D}from"./VirtualKeypad-BNjNZjnh.js";import{u as f}from"./main-layout-state-74XbQ8nQ.js";/* empty css                           */import{B as H,a as V}from"./index-NHkl8kqz.js";import{F as _}from"./format-date-id-D-ORLjoU.js";import"./QueryClientProvider-DhxQ09mG.js";import"./Toaster-D9QYH5nK.js";import"./index-BmMpWGiz.js";import"./isSameDay-BShgF_mc.js";/* empty css                 */import"./index-BGCzkhMS.js";import"./center-DefDiguQ.js";import"./avatar-CMyZ4H7r.js";import"./create-split-props-u5h9OPvL.js";import"./index-DlDWRYrk.js";/* empty css                      */const y=C.forwardRef(function(e,l){const{templateAreas:s,column:m,row:n,autoFlow:a,autoRows:i,templateRows:d,autoColumns:o,templateColumns:u,inline:p,...w}=e;return r.jsx(x.div,{...w,ref:l,css:[{display:p?"inline-grid":"grid",gridTemplateAreas:s,gridAutoColumns:o,gridColumn:m,gridRow:n,gridAutoFlow:a,gridAutoRows:i,gridTemplateRows:d,gridTemplateColumns:u},e.css]})});y.displayName="Grid";function k(c){return F(c,e=>e==="auto"?"auto":`span ${e}/span ${e}`)}const A=C.forwardRef(function(e,l){const{area:s,colSpan:m,colStart:n,colEnd:a,rowEnd:i,rowSpan:d,rowStart:o,...u}=e,p=C.useMemo(()=>B({gridArea:s,gridColumn:k(m),gridRow:k(d),gridColumnStart:n,gridColumnEnd:a,gridRowStart:o,gridRowEnd:i}),[s,m,n,a,i,d,o]);return r.jsx(x.div,{ref:l,css:[p,e.css],...u})});A.displayName="GridItem";async function ut(){return{listUser:await P.getAllActiveUser()}}const pt=O(function({loaderData:e}){const{listUser:l}=e,s=f(t=>t.customer),m=f(t=>t.setCustomer),n=f(t=>t.setHeaderInformation),a=f(t=>t.lastSelectedUser),i=f(t=>t.setLastSelectedUser),{getAllActiveUser:d}=b(),{data:o}=R(d()),{getTakingRecordByUserIdAndMonth:u,addNewtakingRecord:p}=L(),{data:w,refetch:j}=R(u((a==null?void 0:a.id)??(o==null?void 0:o[0].id),new Date)),T=async t=>{s&&(await p.mutateAsync({user_id:s.id,amount:t}),i(s),await j(),m(void 0),n(h))},S=t=>{const g=o==null?void 0:o.find(U=>U.id===t);g&&i(g)},E=t=>{if(t==0)return"Tidak Boleh Nol (0)"},I=t=>{i(t),m(t),n({title:t.username,description:"welcome!"})},N=()=>r.jsx(y,{className:"user-container",children:l.map((t,g)=>r.jsx(A,{children:r.jsx(V,{onClick:()=>I(t),colorPalette:"teal",children:t.username},g)},g))}),M=()=>r.jsx(G,{children:r.jsx(D,{title:"Ambil Berapa?",inputType:"number",handleOnConfirm:T,validatorFunction:E})});return C.useEffect(()=>{n(h)},[]),r.jsx(H,{className:"customer-taking-page",children:r.jsxs(_,{justifyContent:"start",className:"keyboard-and-calendar",children:[s?M():N(),r.jsx(v,{customerMode:!0,user:a,takingRecords:w,onCustomerIdChange:S})]})})});export{ut as clientLoader,pt as default};
